2008-12-16  Esteban Sanchez  <estebans@artica.es>

	* godmode/updatemanager/load_updatemanager.php: Definetely fixed user
	and incident counts.

2008-12-16  Esteban Sanchez  <estebans@artica.es>

	* integria_dbdata.sql: updating_code_path is now blank.

	* godmode/updatemanager/main.php: Fixed style table when an update was
	found.
	
	* godmode/updatemanager/settings.php: Set updating code path to
	homedir if it's empty. Binary path is not used.

	* godmode/updatemanager/load_updatemanager.php: Fixed sql error when
	getting users and incidents.

2008-12-16  Esteban Sanchez  <estebans@artica.es>

	* godmode/updatemanager/lib/libupdate_manager_client.php: Disabled
	debug flag

2008-12-15  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

	* operation/side_menu.php,
	  operation/user_report/report_full_graph.php: Modified strings to
	  improve i18n.

2008-12-15  Jorge Gonzalez  <jorgegonz@artica.es>

        * include/help/en/help_hours_perday.php,
          include/help/en/help_notification_period.php,
          include/help/en/help_limit_size.php,
          include/help/en/help_autowu_completion.php,
          include/help/en/help_no_wu_completion.php: Added and modified
          inline help files.

        * include/languages/es.mo, include/languages/es.po: Updated Spanish 
          translation.

        * include/languages/index.pot: Updated po template.

2008-12-15  Esteban Sanchez  <estebans@artica.es>

	* index.php: Removed unneccessary div closing tag.

	* integria_dbdata.sql: Fixed keygen path since /usr/share/integria
	does not exist.

	* godmode/updatemanager/load_updatemanager.php: Fixed key generation
	and free key. 

	* godmode/updatemanager/lib/libupdate_manager_client.php: Timeout
	value is a bit higher.

2008-12-11  Sancho Lerena <slerena@artica.es>

	* include/functions_graph.php
	include/config_process.php
	include/functions_db.php
	include/config.inc.php
	operation/agenda/agenda.php
	operation/incidents/incident_detail.php
	operation/user_report/report_weekly.php
	operation/user_report/report_monthly.php
	general/footer.php
	general/login_page.php
	godmode/usuarios/configurar_usuarios.php
	godmode/usuarios/lista_usuarios.php:
	
	Latest details (ACL checks and Enteprise hooks for several files.

2008-12-10  Sancho Lerena  <slerena@artica.es>

	* operation/users/user_spare_workunit.php: Fixed probelms updateing task.

	* operation/users/user_task_assigment.php: Shows task by priority.

	* functions_db.php: Fixed a weird SQL typo.
	
	* integria_db.sql: Added field id_language to tkb_data.

	* upgrade.sql, parche.sql: Added new field to KB table.

	* home.php: Added new project overview graph (flash) to home page.

	* integria_help.php: Fixed on not-existant help files (using en). Fixed
	format of missing help page.

	* login_page.php: More height on box (format).

	* links.php: Fixed bug on link deletion.

	* config_process.php, setup.php: Added option to define general font 
	size (buble only).

	* functions.php: Added short_string(), clean_flash_string(), updated
	width of print_priority_flag_image() output 
	
	* functions_calendar.php: Added square on minicalendar to show current day.

	* functions_form.php: combo_users_task() fixed, not working fine until now, 
	combo_kb_categories() shows "any" value for no filtering, added links to
	wu boxes in show_workunit_user(), some minor notice fixes in foreach. Fixed
	a typo in show_workunit_user() that makes the superb ajax feature on WU
	lock to don't work. Now works like a charm :-)

	* functions_fsgraph.php: Added fs_hbar_chart(), some uses of 
	clean_flash_string function to sanitize some gantt texts. Added background
	color support. Minor fixes.

	* functions_graph.php: modified version to be able to use with flash as
	unique point for graphs (flash and normal). Old GD generated graphs now
	uses transparent backgrounds.

	* functions_incidents.php: Updated pie graph to use background color.

	* integria_incident_search.js: Fixed silly problem in manage product 
	ajax code.

	* query.ui.datepicker.js: Hardcoded format causing problems modified.

	* integria.css: input.login button more narrow.

	* sidemenu.php: Added check to get project id if missing and task passed.
	Added full graph report option, add quick link for that report in userbox.
	KB options simplified (removed manager view).

	* inventory_detail.php: Quick link to continue working with object after 
	creating it. Old-style solution to avoid more AJAX!.

	* kb/browse.php: added language to kb search.
	
	* kb/manage_data.php: Added language management for kb items.

	* operation/projects/gantt.php: Some fixes. Added full ACL checks.

	* operation/projects/milestones.php: Added full ACL checks.

	* operation/projects/people_manager.php: Added full ACL checks.

	* operation/projects/project.php: Delete is now disable :-)

	* operation/projects/project_detail.php: Added more ACL checks.

	* operation/projects/project_group_detail.php: More ACL checks.
	
	* operation/projects/project_tracking.php: More ACL checks

	* operation/projects/project_tree.php: Duplicated combo removed Â¿?

	* operation/projects/task_attach_file.php: More ACL checks.

	* operation/projects/task_detail.php: More ACL checks. Changed graph for
	a better one in Flash.

	* operation/projects/task_emailreport.php: More ACL checks.

	* operation/projects/task_files.php, 
	operation/projects/task_move.php,
	operation/projects/task_tracking.php,
	operation/projects/task_workunit.php: More ACL checks.

	* operation/user_report/monthly_graph.php,
	operation/user_report/report_full.php,
	operation/reporting/incidents_html.php: Changed graph for a better one 
	in Flash. 

	* operation/users/user.php: removed listing of profiles here.

	* operation/users/user_spare_workunit.php: more ACL Checks.

	* operation/user_report/report_full_graph.php: New user graph with assigned
	tasks and reported work.

	* integria_small.png: added for help page.

	* include/FusionCharts/*.swf: Added more Flash base graphs from fussion
	chart library.

2008-12-04  Sancho Lerena  <slerena@artica.es>

	* operation/incidents/incident_detail.php: Updated permissions for IM 
	on update operations. 

2008-12-03  Jorge Gonzalez <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated spanish
	  translation.

	* include/languages/index.pot: Updated po template.

2008-12-03  Jorge Gonzalez  <jorgegonz@artica.es>

	* operation/user_report/report_full.php: Stetics.

2008-12-03  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/fr.mo,
	  include/languages/ko.mo, include/languages/fr.po,
	  include/languages/ko.po, include/languages/da.mo,
	  include/languages/tr.mo, include/languages/da.po,
	  include/languages/tr.po, include/languages/el.mo,
	  include/languages/el.po: updated translations from Rosetta.

	* include/languages/index.pot: Updated po template.

2008-12-03  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/functions.php: changed duplicated string.

	* include/languages/es.mo, include/languages/es.po: Updated Spanish 
	  translation.

	* include/languages/index.pot: Updated po template.

	* operation/manufacturers/manufacturer_detail.php, 
	  operation/incidents/type_detail.php, 
	  operation/incidents/incident_detail.php, operation/projects/task.php, 
	  operation/projects/project_group_detail.php, 
	  operation/projects/task_workunit.php, 
	  operation/projects/people_manager.php, 
	  operation/projects/milestones.php, operation/projects/task_detail.php, 
	  operation/kb/manage_cat.php, operation/kb/manage_data.php, 
	  operation/contracts/contract_detail.php, 
	  operation/users/user_spare_workunit.php, 
	  operation/users/user_workunit_report.php, operation/users/user.php, 
	  operation/users/user_edit.php, operation/users/user_search.php, 
	  operation/slas/sla_detail.php, operation/todo/todo.php, 
	  operation/inventories/manage_prod.php, 
	  operation/user_report/report_full.php, 
	  operation/user_report/report_monthly.php, 
	  operation/contacts/contact_detail.php, 
	  operation/companies/company_role.php, 
	  operation/companies/company_detail.php, godmode/setup/links.php, 
	  godmode/perfiles/lista_perfiles.php, 
	  godmode/usuarios/role_manager.php, 
	  godmode/usuarios/lista_usuarios.php: Updated strings to make an easier 
	  translation.

2008-12-02  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/fr.mo, include/languages/fr.po,
	  include/languages/tr.mo, include/languages/tr.po,
	  include/languages/bn.mo, include/languages/bn.po: Added French,
	  Turkish and Bengali translation.

	* include/languages/index.pot: Updated po template.

	* include/languages/Makefile: Added French, Turkish and Bengali
	  translations.

	* integria_dbdata.sql: Added French, Turkish and Bengali
	  translations.

2008-12-01  Ramon Novoa  <rnovoa@artica.es>

	* include/FusionCharts,
	  include/FusionCharts/FCF_Pie3D.swf,
	  include/FusionCharts/FusionCharts.js,
	  include/FusionCharts/FusionCharts_Gen.php,
	  include/FusionCharts/FCF_Gantt.swf,
	  include/FusionCharts/FusionCharts.php,
	  include/functions_fsgraph.php: Added to repository. FusionCharts
	  Free support.

	* include/functions_incidents.php,
	  operation/incidents/incident_search.php,
	  operation/projects/gantt.php: Added flash Gantt and pie charts.


2008-12-01  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

2008-12-01  Jorge Gonzalez  <jorgegonz@artica.es>

	* operation/side_menu.php, operation/users/user_statistics.php:
	  Changed a string to make it easier to translate.

2008-11-27  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/index.pot: Updated po template.

	* include/languages/el.mo, include/languages/el.po: Added Greek
	  translation.

	* include/languages/Makefile: Added 'el' to translations.

	* include/languages/Makefile: Added Greek to translations.

2008-11-26  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/ko.mo, include/languages/ko.po: Added korean
	  translation.

2008-11-26  Jorge Gonzalez  <jorgegonz@artica.es>

	* integriadb_data.sql: Added korean translation.

	* include/languages/index.pot: Updated po template.

	* include/languages/Makefile: Added 'ko' files for translation.

	* include/languages/ko.mo, include/languages/ko.po: Added korean 
	  translation.

2008-11-26  Sancho Lerena <slerena@artica.es>

	* include/functions_graph.php: Bigger font size for DFDs
	
	* include/functions_form.php: combo_task_user_participant() now return
	variable "id_task" instead "task". This fix a bug entering Spare
	workunits that going to vacations task.

	* include/functions_calendar.php: Style changes to be able to size 
	in side_menu.

	* index.php: Detect problems with perissions in attachment and in /tmp
	and warning inside.

	* operation/projects/project_bubblegraph.php: Old code for DFD moved
	to a new page.

	* operation/projects/project_detail.php: Removed DFD from there.

	* operation/side_menu.php: Added new DFD graph. Added mini calendar

	* operation/todo/todo.php: Adapted for changes in function 
	combo_task_user_participant() (task -> id_task). 


2008-11-24  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/da.mo, include/languages/da.po: Added Danish
	  translation, thanks to Rosetta translators.

	* include/languages/index.pot: Updated po template.

	* include/languages/Makefile: Added 'da' to translations.

	* integria_dbdata.sql: Added Danish to translations, modified
	  Spanish for EspaÃ±ol.

2008-11-21  Esteban Sanchez  <estebans@artica.es>

	* include/functions_tasks.php: Fixed some PHP undefined variable
	notices.

2008-11-21  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

	* operation/manufacturers/manufacturer_detail.php,
	  operation/incidents/type_detail.php,
	  operation/incidents/incident_detail.php,
	  operation/buildings/building_detail.php,
	  operation/projects/project_group_detail.php,
	  operation/projects/project.php,
	  operation/projects/people_manager.php,
	  operation/projects/milestones.php,
	  operation/projects/task_detail.php, operation/kb/manage_cat.php,
	  operation/kb/manage_data.php,
	  operation/contracts/contract_detail.php,
	  operation/slas/sla_detail.php, operation/todo/todo.php,
	  operation/inventories/manage_prod.php,
	  operation/inventories/inventory.php,
	  operation/inventories/inventory_detail.php,
	  operation/contacts/contact_detail.php,
	  operation/companies/company_role.php,
	  operation/companies/company_detail.php,
	  godmode/grupos/lista_grupos.php, godmode/setup/links.php,
	  godmode/perfiles/lista_perfiles.php,
	  godmode/usuarios/configurar_usuarios.php,
	  godmode/usuarios/role_manager.php: Changed i18n strings to reduce its
	  number.

2008-11-21  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

	* install.php: Removed border=0 occurences.

	* operation/projects/task_emailreport.php, operation/side_menu.php,
	  operation/users/user_edit.php,
	  operation/user_report/report_annual.php,
	  operation/user_report/report_full.php, general/home.php,
	  godmode/setup/setup.php, godmode/usuarios/configurar_usuarios.php,
	  godmode/updatemanager/main.php: Improved i18n infrastructure.

	* general/logon_ok.php: Deleted unlinked page.

2008-11-20  Sancho Lerena <slerena@artica.es>

	* include/functions_graph.php: Fixed problem in graph (bad parameter).

	* include/functions_calendar.php: Shows Non Justified hours in yellow.
 
	* include/functions.php: no_permission() now show noaccess.php and break.

	* include/functions_db.php: Added get_wu_hours_user(), get_user_other().
	Added event creation on incident, task and project deletion.
	Added a generic WU/Task function that should be used to create WU':
	create_wu_task().

	* include/integria_cron.php: Implemented autowu feature.

	* operation/projects/task_emailreport.php: New feature that sends an
	email with task detail to all participants.

	* operation/side_menu.php: added taskemailreport, added check to do not
	view task menu with id_task < 0

	* operation/user_report/report_annual.php: Now shows non justified hours.
	Fixed a bug that don't sum data properly when different sources mixed.

	* general/noaccess.php: Message update.

	* godmode/setup/setup.php, config_process.php: Added a black list of 
	people without auto-wu feature activated.

2008-11-19  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Added get_user(). Use generic functions in
	some cases. Make check_incident_sla_min_response () to only check
	not opened status.

	* include/functions_groups.php: Added to repository. Group functions.

	* include/integria_cron.php: Make email notifies available for SLA
	checkings. Style corrections.

	* index.php: Style correction.

	* include/functions.php: Style correction in integria_sendmail().

2008-11-19  Jorge Gonzalez  <jorgegonz@artica.es>			     

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	translation.

	* include/languages/index.pot: Updated po template.

	* operation/inventories/manage_prod.php: Bug fixed (%s instead of
	$id in a querry).

2008-11-19  Esteban Sanchez  <estebans@artica.es>

	* operation/inventories/inventory.php: Removed javascript debug.

2008-11-19  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_spare_workunit.php: Fixed an notice PHP error.

2008-11-19  Ramon Novoa  <rnovoa@artica.es>

	* include/styles/integria.css,
	  include/js/integria_incident_search.js,
	  operation/incidents/incident_detail.php,
	  operation/kb/manage_data.php,
	  operation/inventories/inventory_detail.php: Added support for
	  automatic KB item creation from resolved incidents.

2008-11-19  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria_incident_search.js: Added a callback to
	configure_inventory_search_form() to launch when the search is done.

	* integria/include/styles/integria.css: Added style to inventory and
	incidents stats div.

	* include/functions_inventories.php: Removed unused filter parameter
	in filter_inventories(). Fixed print_inventory_object() documentation
	and added return parameter to print or return.

	* operation/incidents/incident.php: Removed unneccesary div since it's
	done using CSS.

	* operation/incidents/incident_search.php: Added a HTML report button
	which was taken from enterprise version and it's now open.

	* operation/inventories/inventory.php,
	operation/inventories/inventory_detail.php,
	operation/inventories/inventory_search.php: Show a button in the
	footer to generate HTML report when a search is done. Added an inventory
	check to avoid showing unexistant or unreachable objects.

	* operation/inventories/inventory_tree.php: Style correction.

	* operation/reporting/incidents_html.php,
	operation/reporting/inventories_html.php: Added to repository.
	Incidents and inventory report.

	* include/functions_db.php: Added get_inventory().

	* include/functions_form.php: Removed image borders. Style corrections.

	* include/functions_tasks.php: Added to repository. Functions to manage and
	operate over tasks.

	* include/functions_workunits.php: Added to repository. Functions to manage
	and operate over tasks workunits.

	* operation/projects/task_create_work.php: Removed from repository. All
	tasks workunits are now managed by user_spare_workunit.

	* operation/projects/task_workunit.php: Use functions in
	functions_workunits. Manage lock and deletion using AJAX.

	* operation/todo/todo.php, operation/side_menu.php: Link to
	task_create_work changed to user_spare_workunit.

	* operation/users/user_spare_workunit.php: Rewritten to allow workunit
	updating and others operations.

	* operation/users/user_workunit_report.php: Removed one unneccesary
	indentation level.

2008-11-19  Jorge Gonzalez  <jorgegonz@svn.gnome.org>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

	* operation/manufacturers/manufacturer_detail.php: fixed bug that
	  made unable to update details. Updated i18n infrastructure.

	* operation/companies/company_detail.php: Updated i18n
	  infrastructure.

2008-11-19  Sancho Lerena <slerena@artica.es>

	* integria_db.sql Added email to tgrupo, tproject, ttask, 
	tworkunit_task has SIGNED id's (to be used with vacations..)

	* parche.sql: Uploaded to solve problems with 2.0-dev installs
	that have UNSIGNED id's in task, project, etc. This should be
	deleted shortly.

	* upgrade.sql: Added contract_number in tcontract, and email in
	tgrupo. Other changes in tconfig.

	* lista_grupos.php, configurar_grupo.php: Added email to group setup.

	* event.php: Style adjustement.

	* setup.php: Removed email settings from this page. Added Autowu
	parameters. Added help to other items.

	* setup_mail.php: Added new setup page for email settings.

	* configurar_usuario.php: Fixed javascript code that strip off
	image filename / extension.

	* lista_usuarios.php,
	company_detail.php,
	todo.php, 
	operation/user.php, 
	contact_detail.php,
	manufacturer_detail.php, 
	contract_detail.php: Added pagination.

	* task.php, 
	task_detail.php, 
	project.php: Show WU from incidents related to tasks of project.

	* task_incidents.php: New file, shows incidents related to current
	task.

	* report_full.php: New user report with all data (projects and incidents)
	between specific dates. Also includes a print view.

	* incident_work.php: renamed function get_incident_workunit_hours().

	* kb/browse.php: Pagination added and changed layout. 

	* kb/manage_data.php: Added pagination, changed layout.

	* incident_detail.php: Show if incident is related to a task. 
	Show link to task.

	* incident_search.php: Show if incident is related to a task. 
	Show link to task.

	* config_process.php: Added $config["autowu_completion"].

	* functions.php: Added print_array_pagination(), 
	
	* functions_calendar.php: Fix in human_time_comparation () that dont
	return anything on dates > 6 months. Added get_working_days (). Fixed
	function get_event_date().

	* functions_db.php: Added INCIDENT_DELETED event. Added incident status
	and resolutions constants. Added functions: get_incident_task_workunit_hours()
	get_incident_project_workunit_hours (), get_incident_task(). 
	Deletion of an incident dont't unlink properly attached files. 

	* functions_form.php: combo_task_user() fixed and show part of project name
	and show list sorted by Project. combo_task_user_participant() also show
	information sorted by title..

	* functions_graph.php: graph_workunit_project_user() has small problems
	rendering data (< insted <=). Now gets end/start dates.

	* integria_cron.php: Added checks for agenda, project ends, and task ends. 
	Added email sending for max_opened incidents SLA check. TODO's pending here.

	* integria.css: Added more padding space to generic TD. Was too tigth!.

	* side_menu.php: Added new mail setup, Incidents for this task, 

2008-11-18  Ramon Novoa  <rnovoa@artica.es>

	* include/functions_inventories.php,
	  operation/inventories/inventory.php: Added inventory object tree
	  tab. Improved inventory search tree.

	* operation/inventories/inventory_tree.php: Added to repository.
	  Inventory object tree.

2008-11-18  Ramon Novoa  <rnovoa@artica.es>

	* upgrade.sql: Updated upgrade script.

2008-11-18  Ramon Novoa  <rnovoa@artica.es>

	* include/functions_inventories.php,
	  operation/inventories/inventory_tree.php,
	  operation/inventories/inventory_search.php: Added object tree
	  to inventory search.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* include/functions_form.php: combo_user_task_profile() now handles a
	null id_task which was showing weird combos sometimes.

	* operation/user_report/report_full.php: Removed checking for
	check_login() since this function exists by itself.

	* operation/users/user_spare_workunit.php: Form redesign. Fixed a UI
	error when showing profiles combo that cause mess and redundancy.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* include/styles/integria.css: Removed border in image inputs.

	* include/functions_html.php: Added print_input_image(). Added support
	for image inputs to print_label.

	* operation/companies/company_detail.php: Added a link to show
	incidents that belongs to a company.

	* operation/incidents/incident.php: A search can be forced now by
	passing do_search HTTP parameter.

2008-11-18  Jorge Gonzalez  <jorgegonz@artica.es>

	* operation/agenda/agenda.php: Changed the space between
	  minicalendars and the calendar view. Added a div to make the
	  central calendar be centered.

	* operation/main_menu.php: Changed the tag for the setup section,
	  so now it is highlighted. Fixes bug #2284175.

2008-11-18  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation

	* include/languages/index.pot: Updated po template.

	* operation/user_report/report_full.php: Updated translation
	  infrastructure.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* operation/user_report/report_full.php: Fixed variable names that
	cause notice PHP warnings.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* operation/user_report/report_full.php: Fixed variable name that
	cause notice PHP warnings.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* include/functions_form.php: Fixed an error in
	combo_user_visible_for_me() when checking ACL.

	* include/functions_incidents.php: Added filter_inventories(). Better
	function documentation.
	
	* include/functions_inventories.php: Better function documentation.

	* operation/inventories/inventory_search.php: Use
	filter_inventories(). Removed variable values in form.

	* operation/user_report/report_full.php: Tab style correction. Use
	generic function. Addeed permission parameter when calling
	combo_user_visible_for_me(). Code cleanup and table fixed when no
	projects.

	* operation/users/user_spare_workunit.php: Fixed table width for IE6.

2008-11-18  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_spare_workunit.php: Tab style correction. Fixed
	datepicker control.

2008-11-17 Sancho Lerena <slerena@artica.es>

	* upgrade.php: Fix on locked field in tworkunit.

	* footer.php: We're now opensource :-)

	* functions_form.php: Going to unification of Incident and Project
	workunits: show_workunit_user() shows visibility.

	* project.php: Proyect free text search now search also in task names.

	* side_menu.php: New workunit on project now uses spare workunit 
	code (much more useful than single project wu code).

	* report_full.php: Now also show task details inside projects. Control
	date picker now works.

	* user_spare_workunit.php: now can receive specific id_task to work
	on creation of WU from projects menu.

2008-11-17  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

2008-11-17  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template.

	* godmode/usuarios/configurar_usuarios.php: Added new string for
	  translation.

2008-11-17  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_spare_workunit.php: Fixed date picker control
	for workunit date.

2008-11-17 Sancho Lerena <slerena@artica.es>

	* report_full.php: New full repor for user.

	* integria.css: Textareas hae now a 99% width.
	
	* user_spare_workunit.php: Fixed problem with dates.

2008-11-17  Sancho Lerena <slerena@artica.es>

	* install.php: Home_url default value is now well taken. Other minor 
	issues with form style.

	* functions_calendar.php: Added generic functions to know when a task,
	event or project is ending and return information about it. Added 
	support to show in agenda the ending of tasks, projects and events in
	current month and in the other two smalls calendar (prev/next).

	* functions_db.php: get_project_workunit_hours() now supports start
	and begin dates for returning data. ADdded get_task_end_date_by_user()

	* functions_form.php: Fixed code in combo_task_user_participant() to 
	show vacations and other special types.

	* integria_cron.php: Added check_daily_task() and checks for notify 
	ending tasks, projects and events of the day by mail.

	* calendar.css: Some new styles to notify events in mini agenda.

	* integria.css: Minimal changes to beautify listing types and some
	controls (margins).

	* side_menu.css: Added full report on a user (with time ranges).

	* user_spare_workunit.php: Now admin users can enter workunits for
	other users. Vacations  and other special project types now works.

	* user_task_assigment.php: Fixed typo in sql rewritten with sprintf.

2008-11-17  Ramon Novoa  <rnovoa@artica.es>

	* include/styles/integria.css,
	  operation/incidents/incident_detail.php,
	  operation/inventories/inventory_detail.php: Fixed delete buttons.

2008-11-17  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	* include/languages/index.pot: Updated po template file.

	* godmode/grupos/lista_grupos.php,
	  godmode/usuarios/role_manager.php,
	  godmode/usuarios/lista_usuarios.php: Updated tables width.

2008-11-17  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation.

	*  include/languages/index.pot: Updated po template file.

	* operation/user_report/report_annual.php,
	  operation/user_report/report_weekly.php,
	  operation/user_report/report_monthly.php: Updated tables width and
	  translation infrastructure.

2008-11-17  Esteban Sanchez  <estebans@artica.es>

	* images/html.png: Added to repository. New icon for report buttons.

	* include/styles/integria.css: Added new style for report buttons.
	Added a float_right class.

	* include/functions_incidents.php: Complete documentation for
	print_incidents_stats(). Incident links now point to the right place.
	Removed enterprise_hook call.

	* operation/incidents/incident.php: Make a string translatable. Fixed
	HTML style.

	* operation/incidents/incident_search.php: Fixed an error showing
	resolution names. Added an enterprise hook when printing incidents to
	report tool. HTML style fixed.

	* include/config_process.php: PHP tag must be lowercase.

	* operation/users/user_task_assigment.php: Tab style correction.

2008-11-17  Esteban Sanchez  <estebans@artica.es>

	* include/functions_incidents.php: Fixed variable name that was
	causing notices.

	* include/js/integria.js: When an element is pulsated, it receives the
	focus also.

	* include/js/integria_incident_search.js: Added
	configure_contact_create_form(), show_contact_create_dialog(). Removed
	debug output using console.log. Show create contact dialog when
	clicking create on contact list in an inventory.

	* operation/contacts/contact_detail.php: It now can create contacts
	via AJAX. Fixed an error when checking creation result. Creation
	can now receive parameters via HTTP request. When receiving an
	id_contract it sets the contact company.

	* operation/incidents/incident_detail.php: Do not show delete link
	when creating.

	* operation/inventories/inventory_detail.php: Added a button to create
	a contact for the list. Do not show delete link when creating.

2008-11-16  Sancho Lerena <slerena@artica.es>

	* integria.css: Table pagination controls now more formatted.

	* side_menu.php: Added direct link to create KB item.

	* manage_data.php: Now has resize textarea control.

	* incident_search.php: Title column is now variable width. 
	
	* agenda.php: Fixed space between small months calendar and big.

	* calendar.css: Better format for small calendars.

	* functions_html.php: Cellspacing is now 0 by default.

	* functions_form.php: print_table_pager() includes text for control
	of pagination size and adds some spaces.

	* home.php, functions_calendar.php: Added checks for ending dates of 
	projects and tasks.

2008-11-14  Esteban Sanchez  <estebans@artica.es>

	* operation/projects/task_files.php: Use generic functions for SQL.
	Style correction. Removed debug code.

2008-11-14  Sancho Lerena <slerena@artica.es>

	* include/styles/integria.css: Update listing style.

	* include/config_process.php: Addedd support for mail_from token.

	* include/functions.php: topi_sendmail is now integria_sendmail.
	And now supports new mail_from config token.

	* include/functions_db.php: Updated code for email function name
	change.
	
	* operation/agenda/agenda.php: updated code for email funcion.

	* operation/incidents/incident_search.php: Better layout, some
	data are now presented on two lines, font sizes has been reduced
	for some columns, and title column has fixed size.

	* operation/projects/task_files.php: Fixed previous commit from 
	Esteban a missing home_url variable was missing, now seems to 
	work fine.

	* godmode/setup/setup.php: Added support for new token mail_from.

2008-11-14  Esteban Sanchez  <estebans@artica.es>
	
	* include/js/integria_incident_search.js: Reload files tab when a new
	file is added to an incident.

2008-11-14  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria_incident_search.js: Inventory search dialog is
	now wider. Reload workunit tab when adding a workunit to an incident.

	* include/styles/flora/flora.accordion.css: Removed background images
	because IE was showing them in a mess with CSS.

	* include/styles/flora/flora.dialog.css: Cleanup, applied classes
	properly. Removed background images.

	* include/styles/flora/flora.resizable.css: Style correction.

	* include/styles/integria.css: Cleanup. Removed styles for dialog
	since they are defined in flora.dialog.css

2008-11-14  Esteban Sanchez  <estebans@artica.es>

	* operation/kb/manage_data.php: Avoid use of homedir to create file
	link since it can cause wrong links.

	* operation/projects/task_files.php: Use rawurlencode() only in the
	filename because it was causing wrong links.

2008-11-14  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident_detail.php: Removed variable
	$iduser_temp because it was an alias for $config[id_user].

	* operation/incidents/incident_search.php: Added a missing header in
	search form asked via AJAX. Search for date range was commented. Style
	correction.

	* operation/inventories/inventory_contacts_search.php: Added
	result_table class to table. Added also a pager.

	* operation/users/user_search.php: Make string searching not case
	senstive.

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* godmode/grupos/configurar_grupo.php: Deleted useless id_user.

	* include/functions_form.php: Removed default value for
	combo_user_visible_for_me() and compare with an empty string. It was
	causing some errors and selected user was wrong.

	* operation/todo/todo.php: Fixed parameter for
	combo_user_visible_for_me().

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_search.php: Added result_table class so a
	cusor pointer is applied.

2008-11-13  Ramon Novoa  <rnovoa@artica.es>

	* include/styles/integria.css,
	  include/functions_db.php,
	  operation/incidents/incident.php,
	  operation/incidents/incident_detail.php,
	  operation/inventories/inventory.php,
	  operation/inventories/inventory_detail.php: Added support for
	  incident and object deletion. Small ACL fix.

	* operation/contracts/contract_detail.php,
	  integria_db.sql: Added contract number information.

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Added tinventory_contact to hold a list of contacts
	related to an incident. Removed auto_increment constraint on
	tincident_inventory.

	* operation/inventories/inventory_detail.php: It now handle to edit
	affected contacts. You can add or remove the list of contacts but by
	default it will use the defined by the contact.

	* operation/inventories/inventory.php: Fixed an error that makes web
	redirection instead of AJAX handling when navigating from an object to
	another.

	* operation/inventories/inventory_contacts.php: Make use of functions
	in functions_inventories.php.

	* include/functions_inventories.php: Added to repository. Incident
	functions.

	* include/functions_incidents.php: Added update_incident_inventories()
	and fixed inventory objects removal.

	* operation/inventories/inventory_contacts_search.php: Added to
	repository. Dialog to search contacts while editing an inventory.

	* include/js/integria_incident_search.js: Added a new dialog to search
	contacts on an inventory.

	* operation/incidents/incident_detail.php: Make use of new functions
	in functions_incidents.php.

	* operation/side_menu.php: Variable type style correction.

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria_incident_search.js: Unbind click event on side
	menu links which cause wrong incidents id and recursive dialog open in
	some changes.

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident_inventory_contacts.php,
	operation/inventories/inventory_contacts.php: Avoid printing contacts
	twice.

2008-11-13  Esteban Sanchez  <estebans@artica.es>

	* operation/inventories/inventory.php,
	operation/inventories/inventory_search.php: Added support to delete
	custom searches.

2008-11-12  Esteban Sanchez  <estebans@artica.es>

	* include/styles/integria.css: Added cursor style to dialog buttons so
	user know they are clickable.

	* include/functions_incidents.php: Added to repository. Incident
	functions will be placed here. At this moment it only holds two new
	functions: filter_incidents() and print_incidents_stats().

	* operation/incidents/incident.php: Allow deletion of custom searches.

	* operation/incidents/incident_detail.php: Default resolution state is
	none now.

	* operation/incidents/incident_search.php: Use functions of
	functions_incidents.php. Added support to custom search removing.

2008-11-12  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria_incident_search.js: Fixed page size in users
	search dialog. User search dialog is a bit bigger now.

	* operation/users/user_search.php: Fixed page size in users search
	dialog.

	* include/js/jquery.tablesorter.pager.js: Fixed a bug that was causing
	double pagination if another search is done.

	* operation/incidents/incident.php: Fixed a bug on the first search,
	which was causing some inconsistent values in the statistics.

	* operation/incidents/incident_detail.php: Fixed a bug that was not
	allowing to add decimal values in the time.

2008-11-12  Ramon Novoa  <rnovoa@artica.es>

	* include/functions_db.php: Fixed user worked hours calculation.

	* operation/incidents/incident.php,
	  operation/incidents/incident_search.php: Added user and incident
	  links to statistics.

2008-11-11  Ramon Novoa  <rnovoa@artica.es>

	* include/functions_db.php: Handle empty query results.

2008-11-11  Ramon Novoa  <rnovoa@artica.es>

	* include/styles/integria.css,
	  include/functions_db.php,
	  operation/incidents/incident_search.php: Added additional
	  incident statistics.

	* operation/projects/project.php: Fixed a typo.

2008-11-11  Esteban Sanchez  <estebans@artica.es>

	* general/login_page.php: Show a message if login proccess failed.

	* general/logon_failed.php: Removed from repository.

	* index.php: Do not redirect to logon_failed anymore.

	* include/styles/integria.css: Removed unused styles and height
	property of login div element.

	* include/js/integria_incident_search.js: Added sort options to first
	column (id) in inventories and incidents tables.

	* include/js/jquery.tablesorter.js: Little hack added to currency
	parser.

2008-11-11  Sancho Lerena <slerena@artica.es>
	
	* index.php: Update link menu, now associated to Agenda ACL check.

	* integria_dbdata.sql: Updated version number in SQL:

2008-11-10  Esteban Sanchez  <estebans@artica.es>

	* include/styles/integria.css: Added style to show order arrow in
	sorting tables.

2008-11-10  Esteban Sanchez  <estebans@artica.es>

	* operation/companies/company_detail.php: Fixed type error when
	fetching company id.

	* include/functions_graph.php: Do not show any error on
	generic_graph().

	* operation/incidents/type_detail.php: Fixed table width to work in
	IE6+.

2008-11-10  Esteban Sanchez  <estebans@artica.es>
	
	* include/functions_form.php: Added support to search by incident
	type. Also it's now possible to search by company.

	* operation/companies/company_detail.php: Added link to contracts and
	contacts.

	* operation/incidents/incident.php: Style correction. Removed
	$id_usuario and replaced by $config.

	* operation/incidents/incident_search.php: Added support to search by
	incident type.

2008-11-07  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident.php: Default search now only show new
	incidents.

	* include/functions_db.php: Fixed an error in incident_tracking that
	cause not showing user name and a PHP notice. Show nothing on
	sql_error_handler() based on error_reporting() level.

2008-11-07  Esteban Sanchez  <estebans@artica.es>

	* sql_error_handler: Added sql_error_handler() to hable SQL errors on
	process_sql. Improve SQL error handling in process_sql().

2008-11-07  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_edit.php: Fixed an error when updating the user
	which was not showing the updated fields, but the old ones.

2008-11-07  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident_files.php,
	operation/kb/browse_data.php, operation/kb/manage_data.php,
	operation/projects/task_files.php: Encode files URL characters to
	allow special characters in filenames. It was causing 404 errors if
	the filename has characters like #@=.

	* operation/incidents/incident_search.php: Ignore closed incident
	without valid date in statistics.

2008-11-06  Sancho Lerena <slerena@artica.es>

	* include/functions_form.php: Added blank space. Incident_details_list 
	now reports human time not mysql timestamp.

	* include/functions_calendar.php: With invalid dates (0000-00-00) 
	render to never.

	* include/functions_db.php: mail_incident() now also includes
	group name in incident information.

	* operation/incidents/incident.php: Header resolution and started
	has now a <br>.

	* operation/projects/project.php: Funny SQL/Logic bug fixed :-) 

	* operation/inventories/manage_prod.php: Missing " char.

2008-11-06  Esteban Sanchez  <estebans@artica.es>

	* operation/users/user_search.php: Implemented user search by string,
	it was missing in the code but appears in the interface.

2008-11-06  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident_detail.php: Added jQuery datepicker
	files when the page is loaded without AJAX. It was causing a failure
	when searching parent incident.

2008-11-06  Esteban Sanchez  <estebans@artica.es>

	* include/functions_form.php: Removed wordwrap on show_workunit_data()
	since it was not showing properly in some cases.

2008-11-06  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria_incident_search.js: Inventory search dialog is a
	bit wider now. Added a check on inventory search to don't show
	active incidents. It also shows more elements in a dialog.

	* operation/inventories/inventory_search.php: It doesn't show active
	incidents of an inventory object if the form is in a dialog.

	* install.php: Removed login class on text inputs.

2008-11-06  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/languages/es.mo, include/languages/es.po: Updated Spanish
	  translation

	* include/languages/index.pot: Updated po template.

2008-11-06  Jorge Gonzalez  <jorgegonz@artica.es>

	* operation/user_report/report_annual.php: fixed bug, a variable
	  that didn't exit.

2008-11-05  Jorge Gonzalez  <jorgegonz@artica.es>

	* include/functions_form.php, include/functions.php,
	  integria_dbdata.sql, operation/incidents/incident_create_work.php,
	  operation/tool_menu.php, operation/projects/task.php,
	  operation/projects/gantt.php,
	  operation/projects/people_manager.php,
	  operation/projects/milestones.php,
	  operation/projects/task_detail.php,
	  operation/projects/project_detail.php,
	  operation/projects/project_tracking.php,
	  operation/kb/browse_data.php, operation/kb/manage_cat.php,
	  operation/kb/browse.php, operation/kb/manage_data.php,
	  operation/side_menu.php, operation/users/user_task_assigment.php,
	  operation/users/user_edit.php, operation/todo/todo.php,
	  operation/user_report/monthly.php,
	  operation/user_report/monthly_graph.php,
	  operation/user_report/report_monthly.php, godmode/setup/links.php,
	  godmode/admin_access_logs.php, godmode/usuarios/role_manager.php,
	  godmode/updatemanager/settings.php,
	  godmode/updatemanager/main.php, include/languages/index.pot: Updated translaion infrastructure

	* include/languages/es.mo, include/languages/es.po: Added Spanish
	  translation.

2008-11-05  Sancho Lerena <slerena@artica.es>

	* login_page, login_failed: Minimal style changes, better layout.
	
	* functions_form.php: Added a Foreach() check for empty array.
	
	* project_group_detail.php: Table/Button div not same size.
	
	* task.php: Some changes in column and table layout (priority).

	* task_detail.php: Added link to continue working with Task after
	create one.
	
2008-11-04  Sancho Lerena <slerena@artica.es>

	* upgrade.sql: tproject_task table was not exist before.

	* include/functions_form.php: Small fix for participant list
	on an incident (a break like).

2008-11-04  Esteban Sanchez  <estebans@artica.es>

	* godmode/setup/event.php, godmode/setup/setup.php,
	operation/buildings/building_detail.php,
	operation/companies/company_detail.php,
	operation/companies/company_role.php,
	operation/contacts/contact_detail.php,
	operation/contracts/contract_detail.php,
	operation/incidents/incident_detail.php,
	operation/inventories/inventory.php,
	operation/inventories/inventory_detail.php,
	operation/inventories/inventory_search.php, operation/kb/browse.php,
	operation/kb/manage_data.php,
	operation/manufacturers/manufacturer_detail.php,
	operation/projects/project.php, operation/projects/project_detail.php,
	operation/projects/project_overview.php,
	operation/slas/sla_detail.php, operation/users/user.php, 
	general/home.php: Fixed table width to work
	in IE6+. Style correction.

	* operation/agenda/agenda.php: Use generic database functions.

	* operation/incidents/incident.php: Fixed table width for IE6+. It now
	makes a default search when the page is shown.

	* godmode/updatemanager/settings.php, godmode/setup/links.php,
	operation/projects/project_group_detail.php,
	operation/projects/project_tree.php, operation/todo/todo.php, 
	operation/inventories/manage_prod.php, operation/kb/manage_cat.php:
	Rewritten to use generic functions which results in a more consistent
	interface.

	* general/login_page.php: HTML style correction. New style using
	generic functions.

	* general/logoff.php: Removed from repository. Logout now moves to
	login page.

	* images/login.png: Added to repository. New image for login button.

	* include/styles/integria-ie-fixes.css: Added to repository. CSS fixes
	for IE6+.

	* include/styles/integria.css: Added a new class for login button.
	Some fixes for IE6+ and porcentual width tables.

	* include/functions.php: Added round_number() to round a number on
	multiplies of another.

	* include/functions_form.php: Now combo_user_visible_for_me() can get
	no user and get current. Rewritten combo_kb_products() to use generic
	functions and receive some new parameters.
	combo_task_user_participant() now receives a label. Fixes in
	show_workunit_data() to wrap long words (some kind of fix for IE6+)

	* operation/incidents/incident_work.php,
	operation/incidents/incident_workunits.php,
	operation/incidents/incident_files.php: Removed useless code when
	using check_login ().

	* operation/projects/task_detail.php: Style correction when getting
	parameters. IE6+ fixes.

	* operation/projects/task_workunit.php: Task project is now
	autocalculated when a workunit is added. Style correction and code
	cleanup.

	* index.php: Added CSS IE fixes. Redirect to login page when user has
	logouts.

	* operation/side_menu.php: Style correction of a couple of string.

	* operation/tool_menu.php: Tab style correction.

	* integria_db.sql: Change delete constraint on tkb_product.

2008-11-03  Esteban Sanchez  <estebans@artica.es>

	* include/js/jquery.ui.textarearesizer.js: Added to repository. jQuery
	plugin to make textareas resizeables.

	* include/styles/flora/i/grippie.png: Added to repository. Textarea
	resizer helper.

	* include/styles/flora/flora.css: Added style to resizeable textareas.

	* include/js/integria_incident_search.js: Make textarea resizeable in
	incident, inventory and workunit forms.

	* operation/incidents/incident_create_work.php: Make textarea a bit
	shorter since it was too much for the dialog.

	* operation/projects/task_detail.php: Make description textarea
	resizeable.

	* index.php: Added jquery.ui.textarearesizer.js to script list.

2008-11-03  Sancho Lerena <slerena@artica.es>

	* include/functions_db.php: incident_mail has public switch to 
	inform about public workunits.

	* operation/incidents/incident_detail.php: Pass argument correctly.

	* operation/users/user.php: Fixed width table for listing.

2008-10-31  Esteban Sanchez  <estebans@artica.es>

	* godmode/grupos/configurar_grupo.php: Make forced_email a bool.

	* godmode/grupos/lista_grupos.php: Fixes with forced_email which was
	not updating or inserting properly.

	* include/js/integria_incident_search.js: Little fix when loading
	email notifies values from group.

	* include/functions_db.php: Added get_incident_group(). Added
	permission parameter to get_user_groups().

	* include/functions_form.php: Rewritten combo_roles().

	* include/functions_graph.php: Added a new generic pipe type.

	* operation/incidents/incident_attach_file.php: ACL fixes. Style
	correction.

	* operation/incidents/incident_create_work.php: ACL fixes. Style
	correction. Uses generic functions.

	* operation/incidents/incident_detail.php: Fixed bug with public flag
	in workunits. Minor style corrections.

	* operation/incidents/incident_search.php: Improved the incident stats
	featuring a new pie graph. Incidents are now ordered by the status
	date.

	* operation/inventories/inventory.php,
	operation/inventories/inventory_workunits.php: Added ACL checks.

	* operation/inventories/inventory_incidents.php,
	operation/inventories/inventory_search.php: ACL fixes.

	* operation/users/user_edit.php: Variable name fixed.

	* operation/side_menu.php: Do not show incidents menu if user doesn't
	have privileges. Style correction.

	* integria_dbdata.sql: Added default user to groups.

2008-10-31  Sancho Lerena <slerena@artica.es>

	* functions_db.php: Some small changes on email functions.

	* functions_form.php: Fixed problem rendering userlist in incident.

	* project_overview.php, project.php: Fixed project group filtering.

	* user.php: Description shortened to avoid bad render.

2008-10-31  Esteban Sanchez  <estebans@artica.es>

	* install.php: Added a final slash in path.

	* include/js/integria_incident_search.js: Fixed a bug on users dialog
	when paginating. Users dialog is wider now.

	* operation/projects/project.php: Added tracking support.

	* operation/projects/project_tracking.php: Added to repository.
	Project tracking view.

	* operation/projects/project_detail.php: Fixed form style. Use new
	javascript date controls.

	* include/js/jquery.ui.core.js,
	include/js/jquery.ui.datepicker.js,
	include/js/jquery.ui.dialog.js,
	include/js/jquery.ui.draggable.js,
	include/js/jquery.ui.resizable.js,
	include/js/jquery.ui.tabs.js,
	include/js/jquery.ui.slider.js,: Updated to latest version. Minified
	version.

	* include/styles/integria.css: Added width to user button on incidents
	dialog.

	* include/functions.php: Improved the code of get_parameter*. Removed
	old, deprecated and unused functions. Added
	get_project_tracking_state()

	* include/functions_db.php: Added project_tracking(). Fixed references
	to unexistent tables like tusuario_perfil. Renamed functions to be
	consistent (removed give_*). Removed deprecated and unused functions.
	Removed useless user parameter in task_tracking().

	* operation/projects/task.php: Fixed task_tracking() calls. Renamed
	deprecated functions.

	* operation/projects/task_create_work.php: Removed inventory object
	controls since it's not implemented yet.

	* operation/users/user.php: Moved profiles icons to enterprise
	version.

	* operation/side_menu.php: Many fixes on selected items on the menu.
	Fixed an error when showing project details. Renamed deprecated
	functions.

	* operation/projects/task_detail.php: Fixed silly string. Added date
	range checking. Fixed task_tracking() calls. Removed big and annoying
	title. Use functions in integria_date.js.

	* operation/projects/task_workunit.php: Style correction. Use of
	generic functions.

	* operation/agenda/agenda.php: Rewritted to use generic functions and
	new date control.

	* include/js/integria_date.js: Added to repository. Common functions
	to date ranges controls.

	* general/home.php, godmode/updatemanager/load_updatemanager.php,
	godmode/usuarios/configurar_usuarios.php,
	godmode/usuarios/role_user_global.php,
	include/functions_form.php, include/functions_graph.php,
	include/gantt.php, operation/common/workunit_detail.php,
	operation/incidents/incident_attach_file.php,
	operation/incidents/incident_create_work.php,
	operation/incidents/incident_detail.php,
	operation/incidents/incident_inventory_contacts.php,
	operation/incidents/incident_inventory_detail.php,
	operation/incidents/incident_notes.php,
	operation/incidents/incident_notes_detail.php,
	operation/incidents/incident_search.php,
	operation/incidents/incident_work.php,
	operation/inventories/inventory_workunits.php,
	operation/inventories/manage_prod.php, operation/kb/browse.php,
	operation/kb/search.php, operation/messages/message.php,
	operation/projects/gantt.php, operation/projects/gantt_graph.php,
	operation/projects/milestones.php,
	operation/projects/people_manager.php,
	operation/projects/project_group_detail.php,
	operation/projects/task_attach_file.php,
	operation/projects/task_files.php, operation/projects/task_move.php,
	operation/projects/task_tracking.php, operation/todo/todo.php,
	operation/user_report/monthly.php,
	operation/user_report/monthly_graph.php,
	operation/user_report/report_annual.php,
	operation/user_report/report_monthly.php,
	operation/user_report/report_weekly.php,
	operation/user_report/weekly_graph.php,
	operation/users/user_spare_workunit.php,
	operation/users/user_task_assigment.php,
	operation/users/user_workunit_report.php, index.php, 
	godmode/setup/event.php: 
	Renamed deprecated functions. Style correction.

2008-10-29  Sancho Lerena <slerena@artica.es>

	* operation/users/user_edit.php: Fixed problems with
	length of email field.

	* functions.php: topi_rndcode now works with spaces.

	* integria.css: Added margin left for search table.

	* upgrade.sql: Sql script to migrate DB schema from 1.2 to 2.0.

	* integria_db.sql: Fixed typo in tcost table.

	* login_page.php: Adjusted some styles to look better.

	* functions_calendar.php: Un-init variable now has initilization.

	* functions_db.php: Added give_number_files_project(), fixed typo
	in user_belong_project().

	* functions_form.php: combo_kb_products() improved (works with 
	any value, optional).

	* functions_graph.php: all_project_tree() fixed (missing user). Need
	to fix and get user session properly.

	* side_menu.php: Added total file list to project view.

	* inventory_detail.php: Header update.

	* manage_prod.php: Fixed small typo.

	* kb/browse.php: Improved search on KB navigation.

	* kb/browse_data.php: Improved visualization on KB article.

	* kb/manage_data.php: Set defaults on product type and cateogry.

	* project_overview.php: Fixed icon render.

	* task_attach_file.php: Fixed layout.

	* task_files.php: Implemented deletion on task attachments.


2008-10-29  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Changed cascade trigger on foreign keys of ttask.
	Added description field to tincident_track. Added foreign key to
	tworkunit_task.

	* integria_dbdata.sql: Style correction.

	* include/js/integria_incident_search.js: Moved configurations of
	adding and removing an inventory to a new function
	configure_inventory_buttons() so they can be added to add workunit to
	task dialog.

	* include/styles/flora/flora.datepicker.css: Make the theme blue like
	all current theme.

	* include/functions_calendar.php: Fixed human_time_comparation() which
	was allways returnings monts. Style correction.

	* include/functions_db.php: Improved the code of user_belong_project()
	so the database query is easier. Removed debug output in
	incident_tracking().

	* include/functions_form.php: Rewritten combo_user_task_profile() to
	use generic functions. Rewritten combo_users_task() to use generic
	funcitons and allow returning instead of echoing. Fixed an error in
	combo_task_user() which did not allow to show selected task. String
	correction in show_workunit_user().

	* operation/side_menu.php: Translatable string correction.

	* include/config.php.old: Removed. Unused file.

2008-10-20  Sancho Lerena <slerena@artica.es>
:
	* include/config_process.php: Updated version.

	* install.php: Added support for enterprise installer (db).

	* integria_dbdata.sql: Cleaned unused code.

2008-10-20  Esteban Sanchez  <estebans@artica.es>

	* general/header.php: Added a link to the main page at top right logo.
	Style correction and renamed the "bye" parameter to "logout", which is
	more clear.

	* index.php: Use "logout" parameter.

	* general/main_menu.php, godmode/menu.php: Deleted from repository.
	Old and unused file.

	* godmode/grupos/configurar_grupo.php: Fixed the default user combo.
	Style correction.

	* godmode/grupos/lista_grupos.php: Added AJAX support to get group
	details. Fixed default user assignment on insert and update.

	* godmode/usuarios/configurar_usuarios.php: Removed use of
	help_label().

	* include/js/integria_incident_search.js: Removed references to
	refresh_table() because new tables design doesn't use different
	colors. Fixed an error when paginating inventories.

	* include/js/jquery.ui.slider.js: Added to repository. Slider jQuery
	UI component.

	* include/languages/date_en.js: Added default date format.

	* include/styles/flora/i/slider-bg-1.png: Updated and removed round
	corners.

	* include/styles/flora/flora.slider.css: Make the sliders a bit wider
	and fixed the background.

	* include/styles/integria.css: Removed background on links.

	* include/config_process.php: Added enterprise definition. Style
	correction.

	* include/functions.php: Added get_periodicities(). Renamed
	get_indicent_priorities() to get_priorities(). Added
	ellipsize_string().

	* include/functions_calendar.php: Fixed human_time_comparation() to
	avoid showing "1.7 minutes". 

	* include/functions_db.php: Improved incident_tracking() and added
	constants to all the types of trackings available to avoid magic
	numbers. Added get_task_hours() and marked give_hours_task() as
	deprecated. check_login() now exits the application. Added ACL checks
	on get_inventories_in_incident(). Added get_inventory_group() to get
	the group of an inventory and checks ACLs easily. get_incident_users()
	don't duplicate owner and creators in affected.

	* include/functions_form.php: Now combos are more consistent with the
	interface if no editing is allowed. Added combo_incident_types().
	Style correction.

	* include/functions_html.php: Added an extra parameter to
	print_label() to add extra HTML after the label. Useful to show
	non-editable form elements.

	* operation/common/workunit_detail.php, operation/kb/browse_data.php,
	operation/messages/message.php,
	operation/incidents/incident_notes_detail.php: Fixed link to
	user_edit.

	* operation/contracts/contract_detail.php: Added search_ prefix to
	id_company parameter to avoid collisions. Added datepicker support to
	date elements.

	* operation/incidents/incident.php: Fixed reference to language config
	value.

	* operation/incidents/incident_detail.php: Added incident tracking.
	Fixed parent updating which was not working. Style correction and
	bugfixing. Make the form more user-friendly for read-only users.

	* operation/incidents/incident_files.php,
	operation/incidents/incident_workunits.php,
	operation/inventories/inventory_contacts.php, 
	operation/inventories/inventory_incidents.php,
	operation/incidents/incident_inventory_detail.php: Better ACL check
	for reader and writer users.

	* operation/incidents/incident_notes.php: Incident tracking. Style
	correction.

	* operation/incidents/incident_search.php: Better ACL check. Show
	longest incident on stats.

	* operation/incidents/incident_tracking.php: Better display of
	tracking operations in an incident.

	* operation/inventories/inventory_contracts.php: Better ACL check.
	Fixed an display error when the contract was finished.

	* operation/inventories/inventory_detail.php: Better ACL check.
	Make the form more user-friendly for read-only users.

	* operation/inventories/inventory_search.php: Better ACL check for
	inventory objects. 

	* operation/projects/project.php: Style correction.

	* operation/projects/task_detail.php: Rewritten to clean up the
	interface and make it consistent with the rest. Completion value is
	now a cool slider.

	* operation/users/user.php: Rewritten to use generic functions.

	* operation/users/user_edit.php: Rewritten to use generic functions.
	Make the page more user-friendly for read-only users, now it don't
	show the info in a form which seems editable. Separate password form
	of general form.

	* operation/users/user_search.php: Fixed the class of the result
	table.

	* operation/side_menu.php: Style correction. Fixed highlight of "Edit
	my user" option.

2008-10-20  Esteban Sanchez  <estebans@artica.es>

	* godmode/db: Deleted from repository. Old code from other
	application. If we need these files in the future, it's better to
	write from scratch.

	* general/main_menu.php, godmode/menu.php: Deleted from repository.
	Old and unused menu.

	* general/header.php: Added a link in the main top right picture.
	Style correction.

	* include/styles/integria.css: Removed background for all the links
	and menu items.

	* index.php: Use logout instead of bye.

	* include/languages/index.pot: Generated.

2008-10-20  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Added three news flags to tprofile for inventory
	management.

	* integria_dbdata.sql: Added new option to tconfig.

	* include/gettext.php, include/streams.php: Added to repository.
	Gettext support.

	* index.php: Rewrite the login proccess so the redirection is now
	smoother. Strings moved to gettext.

	* general/login_page.php: Better management of given parameters so the
	redirection is smoother.

	* operation/side_menu.php: Fixes managing sec and sec2. Added a new
	dinamic menu to inventory.

	* operation/main_menu.php: Fixes when managing sec and sec2. Strings
	moved to gettext.

	* operation/user_report/report_weekly.php: Tab style correction.
	Strings moved to gettext.

	* operation/inventories/inventory.php: Added a new tab to show
	contacts. Manage the side menu when an inventory object is shown.
	Paginate the results in base to the integria configuration.

	* operation/inventories/inventory_search.php: Added a limit to the
	search. Added a link to display the advanced search dialog.

	* operation/inventories/inventory_contacts.php: Added to repository.
	Show a list of contacts relative to an inventory object.

	* operation/incidents/incident.php: Deleted old code. Added datepicker
	javascript reference. Paginate the results in base to the integria
	configuration.

	* operation/incidents/incident_detail.php: Added support to insert a
	giving inventory object when creating. Strings moved to gettext.

	* operation/incidents/incident_inventory_contacts.php: Updated style
	indexes.

	* operation/incidents/incident_search.php: Added support to date
	searching. Strings moved to gettext.

	* operation/incidents/incident_notes.php: Strings moved to gettext.
	Removed debug output.

	* operation/incidents/incident_work.php, include/styles/link.css:
	Header replaced.

	* operation/companies/company_detail.php: Strings moved to gettext.
	Fixed field name on SQL sentence when searching.

	* include/config_process.php: Added gettext loading routine. Added
	limit size value. Removed old language_*.php inclusion.

	* include/functions.php: Use gettext object on __(). Strings moved to
	gettext.

	* include/languages/language*.php: Deleted from repository.
	
	* include/functions_form.php: Added support to advanced incident
	search. Added print_table_pager() to show the pager on sortable
	tables. Strings moved to gettext.
	
	* include/functions_html.php: Removed variable use in __().

	* include/styles/flora/flora.css: Fixed background color.

	* include/styles/flora/flora.tabs.css: Style correction.

	* include/styles/integria.css: Changed cursor in help elements.

	* languages/Makefile, languages/date_*.js, languages/index.pot: Added
	to repository.

	* include/js/jquery.ui.datepicker.js: Added to repository. Datepicker
	javascript dialog.

	* godmode/setup/setup.php: Added limit_size setup. Use generic
	functions to show the page.
	
	* operation/contracts/contract_detail.php,
	include/functions_graph.php, godmode/perfiles/lista_perfiles.php,
	godmode/grupos/configurar_grupo.php, godmode/grupos/lista_grupos.php, 
	integria/general/error_install.php, general/error_noconfig.php,
	general/logoff.php, general/logon_failed.php, general/logon_ok.php,
	general/main_menu.php, general/noaccess.php,
	general/error_perms.php, general/footer.php, general/header.php,
	general/home.php, general/links_menu.php,
	godmode/admin_access_logs.php, integria/godmode/menu.php,
	godmode/db/db_audit.php, godmode/db/db_event.php,
	godmode/db/db_info.php, godmode/db/db_info_data.php,
	godmode/db/db_purge.php. godmode/db/db_main.php.
	godmode/db/db_refine.php, 
	godmode/usuarios/configurar_usuarios.php,
	godmode/usuarios/lista_usuarios.php,
	godmode/usuarios/role_manager.php,
	godmode/usuarios/role_user_global.php,
	godmode/updatemanager/load_updatemanager.php,
	godmode/updatemanager/main.php, godmode/updatemanager/settings.php,
	godmode/setup/event.php, godmode/setup/links.php, 
	include/functions_calendar.php, include/functions_db.php, 
	operation/companies/company_role.php,
	operation/common/workunit_detail.php,
	operation/buildings/building_detail.php, operation/agenda/agenda.php,
	operation/contacts/contact_detail.php,
	operation/incidents/incident_tracking.php,
	operation/incidents/incident_work.php,
	operation/incidents/type_detail.php,
	operation/incidents/incident_statistics.php,
	operation/incidents/incident_notes_detail.php,
	operation/incidents/incident_inventory_detail.php,
	operation/incidents/incident_create_work.php,
	operation/tool_menu.php, operation/users/user.php,
	operation/users/user_edit.php, operation/users/user_search.php,
	operation/users/user_spare_workunit.php,
	operation/users/user_statistics.php,
	operation/users/user_task_assigment.php,
	operation/users/user_workunit_report.php,
	operation/user_report/monthly.php,
	operation/user_report/monthly_graph.php,
	operation/user_report/report_annual.php,
	operation/user_report/report_monthly.php,
	operation/user_report/weekly_graph.php, operation/todo/todo.php,
	operation/projects/gantt.php, operation/projects/gantt_graph.php,
	operation/projects/task.php, operation/projects/task_workunit.php,
	operation/projects/project_group_detail.php,
	operation/projects/project.php, operation/projects/gantt.php,
	operation/projects/people_manager.php,
	operation/projects/milestones.php,
	operation/projects/task_tracking.php,
	operation/projects/task_files.php, operation/projects/task_detail.php,
	operation/projects/task_attach_file.php,
	operation/projects/project_tree.php,
	operation/projects/task_create_work.php,
	operation/projects/task_move.php,
	operation/projects/project_detail.php, operation/messages/message.php,
	operation/manufacturers/manufacturer_detail.php,
	operation/kb/browse_data.php, operation/kb/manage_prod.php,
	operation/kb/manage_cat.php, operation/kb/browse.php,
	operation/kb/manage_data.php, operation/kb/search.php,
	operation/inventories/inventory_contracts.php: Strings moved to
	gettext. References to lang_label removed. References to
	include/language*php removed.

2008-10-16  Sancho Lerena <slerena@artica.es>

	* operation/projects/project_overview.php: Added project overview
	page, who shows projects using project groups.

	* operation/kb/manage_prod.php: Deleted.

	* operation/inventories/manage_prod.php: Product type management
	is now under inventory submenu, not KB.

	* integria_db.sql: Stripped enterprise SQL code.

	* config_process.php: Added include for functions.php (missing).

	* functions.php: Added enterprise function hooks and constants.

	* functions_db.php: Adapted code for new enterprise function syntax.

	* side_menu.php: Stripped enterprise links.

	* task_detail.php: Some improvements in creation of a task (quick
	link to created task, removed graph info in creation process.)

	* user.php: Profile information with enteprise include hook.

2008-10-10  Esteban Sanchez  <estebans@artica.es>

	* include/functions_calendar.php: Removed undefined variable and
	replaced by a fixed string.

	* operation/incidents/incident_search.php: Fixes to solve division by
	zero errors.

2008-10-10  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Added cost field to tinventory. Change description
	fields to text instead of varchars. Fixed some foreign key actions
	when deleting.

	* godmode/grupos/configurar_grupo.php,
	godmode/setup/event.php, godmode/usuarios/role_manager.php,
	operation/buildings/building_detail.php,
	operation/incidents/type_detail.php, 
	operation/manufacturers/manufacturer_detail.php, 
	godmode/grupos/lista_grupos.php: Rewritten to use integria style for
	forms. Style correction and use of common functions.

	* operation/contacts/contact_detail.php,
	operation/contracts/contract_detail.php: Added filter by company
	option.

	* operation/incidents/incident.php: Moved tab configuration to a
	function. Manage goto incident form in sidebar menu. Added a callback
	to configure_incident_search_form() to query for stats for the
	incidents which are shown at the bottom.

	* operation/incidents/incident_detail.php: Removed reference to old
	tgroup_manager table.

	* operation/incidents/incident_search.php: Use __(). Added an optional
	parameter (show_stats) to show stats of the incidents instead of
	displaying the results.

	* operation/incidents/incident_tracking.php: Style correction and
	use of common functions. Use __().

	* operation/inventories/inventory.php: Manage goto incident form at
	the sidebar. Style corrections in the javascript and manage of
	previous selected inventory.

	* operation/inventories/inventory_contracts.php: Show a better display
	of the contract details.

	* operation/inventories/inventory_detail.php: Added cost field.

	* operation/inventories/inventory_search.php: Form reordered. Removed
	searching by id, since it's now done in the sidebar.

	* operation/users/user_search.php: Style correction.

	* operation/side_menu.php: Added two new forms to move quickly to a
	incident or inventory object by the id. Added a new block to show
	incident details.

	* integria/index.php: Added a javascript fix for Internet Explorer.
	HTML quote style corrections.

	* include/js/integria_incident_search.js: Added fixes to Internet
	explorer. Added a new callback to configure_incident_search_form() to
	execute a function when results are shown.

	* include/styles/flora/flora.dialog.css: Style correction.

	* include/styles/integria.css: Added a style to dialogs in the
	sidebar.
	
	* integria/include/functions.php: Skip directories and hidden files in
	list_files(). Renamed get_incident_resolutions(). Style corrections
	and uses of common functions.

	* include/functions_calendar.php: Added optional parameter to
	give_human_time().

	* include/functions_db.php: Return empty array if no results in
	get_incident_workunits(). Renamed check_incident_sla_max_response()
	and added check_incident_sla_min_response() and
	get_group_default_user().

	* include/functions_form.php: Added label parameter to
	combo_user_visible_for_me(). Style corrections. Added a combo to
	search incidents for the users. Added incident_details_list() to show
	incidents details in a side box.

	* include/functions_graph.php, include/styles/flora/flora.dialog.css:
	Tab style correction.

	* include/functions_html.php: Added rowspan to table object for
	print_table().

	* include/integria_cron.php: Rewritten and adopted to new tables.

2008-10-06  Ramon Novoa  <rnovoa@artica.es>

	* integria_dbdata.sql,
	  integria_db.sql: Added Update Manager client support.

	* godmode/updatemanager,
	  godmode/updatemanager/lang,
	  godmode/updatemanager/lang/language_en.php,
	  godmode/updatemanager/load_updatemanager.php,
	  godmode/updatemanager/lib,
	  godmode/updatemanager/lib/load_updatemanager.php,
	  godmode/updatemanager/lib/libupdate_manager_client.php,
	  godmode/updatemanager/lib/libupdate_manager.php,
	  godmode/updatemanager/lib/libupdate_manager_utils.php,
	  godmode/updatemanager/lib/libupdate_manager_updates.php,
	  godmode/updatemanager/lib/libupdate_manager_components.php,
	  godmode/updatemanager/settings.php,
	  godmode/updatemanager/main.php: Added to repository. Update Manager
	  client.

2008-10-06  Esteban Sanchez <estebans@artica.es>

	* integria/integria_db.sql: Added missing foreing keys (they make life
	easier) and reordered table creation.

	* include/functions_db.php: Added get_incident(), get_incident_slas()
	and check_incident_sla(). That last function checks if affected SLAs
	were overdue or not.

	* include/integria_cron.php: Style correction. Rewritten to use
	generic db functions.

2008-10-03  Esteban Sanchez <estebans@artica.es>

	* operation/slas/sla_detail.php: Adapted to new form styles.

2008-10-03  Esteban Sanchez <estebans@artica.es>

	* operation/incidents/incident.php: Added javascript code to treat
	delete operation on files tab so it can be made using AJAX.

	* operation/incidents/incident_detail.php: Fixes in code for removing
	an attachment of an incident. 

	* operation/incidents/incident_files.php: Added an id to the files
	table. Added also a missing result div. Changed delete link to AJAX
	interface.

	* operation/incidents/incident_notes.php,
	operation/incidents/incident_work.php: Fixed wrong "sec" parameter in
	links.

	* operation/slas/sla_detail.php: Removed old $lang_label use.

2008-10-03  Esteban Sanchez <estebans@artica.es>

	* include/js/integria.js: Added an h3 tag to result_msg().

	* include/js/integria_incident_search.js: Fixed upload dialog form, so
	it can now add a file using AJAX. Fixed height of file upload dialog.

	* include/functions_db.php: Style correction.

	* include/functions_html.php: Added print_input_file() to create an
	input file HTML object.

	* operation/buildings/building_detail.php,
	operation/manufacturers/manufacturer_detail.php,
	operation/slas/sla_detail.php: Moved from operation/inventory/

	* operation/side_menu.php: Fixed link to moved files.

2008-10-01  Esteban Sanchez <estebans@artica.es>

	* integria_db.sql: Added a field to unique constraint on
	tcustom_search.

	* operation/companies/company_detail.php,
	operation/companies/company_role.php: Rewritten to fix other editors
	forms style.

	* operation/contacts/contact_detail.php,
	operation/contracts/contract_detail.php: Fixed some bugs when
	deleting.

2008-10-01  Esteban Sanchez <estebans@artica.es>

	* integria_db.sql: Boolean field are better representated with
	tinyint(1). Added new table tcustom_search.

	* include/js/integria.js: Added result_msg() and load_form_values().

	* include/js/integria_incident_search.js: Style correction.

	* include/js/jquery.form.js: Added a patch to get button values of a
	form (needed to implement custo searchs).

	* include/styles/integria.css: Added style to search tables.

	* include/functions_db.php: Database error are shown with
	trigger_error(), so they can be disabled with error_reporting(). Added
	create_custom_search() and get_custom_search().

	* include/functions_html.php: XHTML fixes.

	* operation/contacts/contact_detail.php,
	operation/contracts/contract_detail.php: Form rewritten and adapted to
	new editor form styles.
	
	* operation/incidents/incident.php,
	operation/incidents/incident_search.php,
	operation/inventories/inventory_search.php,
	operation/inventories/inventory.php: Added support to save searches.

	* operation/incidents/incident_inventory_contacts.php: Show contacts
	details in a popup menu.

2008-09-29  Esteban Sanchez <estebans@artica.es>

	* include/js/integria_incident_search.js: Fixed bug on incident dialog
	when checking affected objects. Fixed code when removing an object.
	Fixed name fetching in inventory search result table.

	* include/functions_db.php: Added get_inventory_workunits() to get all
	the workunits affecting an inventory object.

	* include/functions_form.php: Renamed $row3 variable to $workunit.
	Renamed $search_ticket variable to $search_id_incident and cast into
	string.

	* operation/incidents/incident_search.php: Renamed $search_ticket to
	$search_id_incident.

	* operation/inventories/inventory.php: Added login checks. Added
	contracts and workunits tabs.

	* operation/inventories/inventory_contracts.php: Added to repository.
	Show contracts affecting an inventory object (need more styling).

	* operation/inventories/inventory_workunits.php: Show the workunits
	done that affects an inventory object.
	
	* operation/inventories/inventory_incidents.php: Added a better title
	to the page.

	* operation/inventories/inventory_search.php: Added support to filter
	by company. Use __() instead of lang_string().

	* integria_db.sql: Normalize indentation of field type.

2008-09-26  Sancho Lerena <slerena@artica.es>

	* Small fixes on several files.

2008-09-25  Sancho Lerena <slerena@artica.es>

	* images/avatar: Deleted old simpon stuff and added a lot new icons.

	* config_process.php: Updated vars. Error strings uses homeurl path.

	* function.php: list_files(), "." and ".." detection, added a new 
	string to "filter out" directory results.

	* functions_calendar.php: Style issues solved.

	* functions_db.php: get_user_visible_users() was not working fine,
	missing current user. Fixed. print_user_avatar() was not working fine
	due default value, fixed.

	* functions_form.php: Fixed label removed on combo_task_user_participant()
	Implemented public for WU in incidents, in show_workunit_data(). Also
	added code to lock and view locked info with avatar and username.
	form_search_incident(), have now a search field for ticket id.
	incident_users_list(), fixed layout.

	* functions_graph.php: A bad default value in id_user was crashing 
	whole system :(. Fixed.

	* functions_html.php: print_checkbox_extended() now shows label in
	the same way other form components.

	* print_checkbox_extended.js: Temporal fix to be able to edit incidents,
	needs to fix properly.

	* calendar.css: New specific styles for calendar.

	* integria.css: A lot of minor changes.

	* side_menu.php: Added more info for user box.

	* contract_detail.php, company_detail.php, company_role.php: 
	Fixed button creation.

	* incident_create_work.php: Layout changes, added support for public
	workunits.

	* incident_detail.php: Support for public wu, added link after creation 
	of an incident. Added a link to parent incident in detail view. 
	Parent incident editor don't work, needs to be fixed.

	* incident_search.php: Added support for search on ticket id. SLA fired
	check is now real.

	* inventory_detail.php: Fixed layout.

	* inventory_search.php: Added support for search on inventory ID. Added
	column to show if an object have active incidents active.

	* project_tree.php:  Fixed layout and serach options better presented.

	* task.php: show_task_tree() fixed, now show nested elements.

	* task_create_work.php: Support public WU..

	* task_workunit.php: Locking mechanism now stores user id.

	* todo.php: Fixed a lot of style issues.

	* user.php: Solved some style issues.

	* user_edit.php: Nows uses a better way to detect available avatars and show.
	Also show link to user editor (Godmode) and disable some info if only viewing
	data.

	* user_spare_workunit.php: Support for private/public, solved problems with
	task combo, layout changed.

	* index.php: Show sitename in title.

	* setup.php: new options added to setup managemene (siteinfo, currency, 
	hoursperday, mailheader and mailfooter).

	* integria_db.sql: tconfig now uses a TEXT field to store VALUE. 
	tgrupo has id_user_default and forced_email to replace usage of old table
	tgroup_manager that has been deleted. Tworkunit changes locked to a varchar
	and removes locked_id_user. 

	* integria_dbdata.sql: New options for tconfig used in setup.php.

	* lista_grupos.php, configurar_grupo.php: New options for groups. 
	Icon change now works.

	* configurar_usuarios.php: Issues with avatars are now fixed. This uses 
	a icon name WITHOUT extension, and adds "small" for using small avatars.

2008-09-24  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Added print_user_avatar() to show the
	avatar of an user.

	* godmode/usuarios/lista_usuarios.php: Use print_user_avatar().

	* include/functions_form.php: Use print_user_avatar(). Added building
	and sla fired to incident search form.

	* operation/incidents/incident_search.php: Do the search by building,
	serial number and sla fired.

	* operation/inventories/inventory_detail.php: Added missing field on
	SQL sentence when inserting.

	* operation/inventories/inventory_incidents.php: Show priority flag,
	status name and user avatar.

	* include/styles/integria.css: Fixed pager select style.

2008-09-24  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Added get_users_in_group().

	* include/functions_form.php: Added serial and part numbers criterium
	on incident search form (not working yet). Added incident_users_list()
	to get a list for the sidebar of the affected users in an incident.

	* integria/include/js/integria.js: Added support to toggleDiv() to get
	an HTML element or id.

	* include/js/integria_incident_search.js: Add workunit dialog a bit
	bigger. Fixes in configure_incident_side_menu() to show affected users
	in an incident.
	
	* include/styles/integria.css: Replaced previous orange color with new
	blue one. Some fixes in lists and selects.

	* operation/side_menu.php: Replaced lang_string() with __(). Added new
	affected users sidebar.

	* operation/incidents/incident.php: Some fixes when selecting an
	incident in the results and when an id was given to the page.

	* operation/incidents/incident_create_work.php: Fixed a little bit the
	layout and the form buttons.

	* operation/incidents/incident_detail.php: Added an AJAX operation to
	get the list of affected users.

	* operation/incidents/incident_inventory_detail.php: A bit styling in
	SLA description.

	* operation/inventories/inventory_detail.php: Updating or inserting
	SLA was being ignored.

2008-09-23  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Added get_building() and get_sla().

	* include/js/integria_incident_search.js: Added a close button at the
	bottom of search inventory dialog (it need styling).

	* include/styles/integria_tip.css: Added new tip classes.

	* include/styles/flora/flora.dialog.css: Added style to bottom pane of
	dialogs (applies when there are buttons).

	* operation/incidents/incident_inventory_detail.php: Added new fields
	and tooltips to show inventory details.

2008-09-23  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria.js: Added a new function: pulsate() to flash an
	HTML element. result_msg_error() and result_msg_success() code
	rewritten.

	* include/js/integria_incident_search.js: Added some check in incident
	form to ensure the user has added an inventory object.

	* operation/incidents/incident.php: Create incident dialog is no
	longer shown in a dialog.

	* operation/incidents/incident_detail.php: Variable renamed to
	english.

	* operation/incidents/incident_files.php,
	operation/incidents/incident_tracking.php,
	operation/incidents/incident_workunits.php,
	operation/incidents/incident_inventory_contacts.php,
	operation/incidents/incident_inventory_detail.php: Merge titles style.

	* operation/incidents/incident_search.php: Now it can filter for
	inventory objects.

2008-09-23  Esteban Sanchez  <estebans@artica.es>

	* operation/inventories/inventory.php: Added support to view or edit
	an inventory directly.

	* operation/incidents/incident_inventory_detail.php: Changed link to
	view an inventory object.

	* operation/incidents/incident.php: Avoid ugly tab refreshing when an
	incident id was given. Replaced lang_string() with __(). Fixed a
	Javascript rare bug when setting up the editor form.

2008-09-23  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Added a foreign key constraint in tincident_type.
	Moved twizard on top of tincident_type.

	* include/functions_db.php: Added get_incident_types().

	* include/js/integria_incident_search.js: More fixes to nested
	dialogs. Now the parent_dialog is hold in a variable. Added an action
	to incidents form to search parent incident. Added
	show_incident_search_dialog() and configure_incident_search_form() to
	open a incident search dialog and configure the form of searching an
	incident. Fixed bug on inventory form when it was open in a dialog.

	* operation/incidents/incident.php: Now it opens details tab if an
	incident id was given. Use configure_incident_search_form() new
	function to setup the searching form. Style correction.

	* operation/incidents/incident_detail.php: Added incident type
	configuration.

	* operation/incidents/incident_search.php: Show incident search form
	if it was asked via AJAX.

	* operation/inventories/inventory_detail.php: Get id_sla from database
	when editing.

	* operation/inventories/inventory_incidents.php: Added a link to view
	and edit all the details of an incident.

	* operation/kb/manage_prod.php: Fixed fetching product icon (it was
	querying the wrong deprecated table).

2008-09-23  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Fixes in SQL sentence on
	get_incidents_on_inventory().

	* include/js/integria_incident_search.js: Fixed an error on
	show_inventory_search_dialog() which was not working on inventories
	page.

	* include/styles/integria.css: Added border:0 to all images.

	* operation/inventories/inventory_incidents.php: Bug fixes like typos
	and similars. Show the result table.

	* ChangeLog: Reordered the commits.

2008-09-22  Sancho Lerena <slerena@gmail.com>

	* integria_*.sql: Fixed several problems.

	* *.php: Fixes.

	* images/project_groups_small: Added new icons for new
	projects groups.

	* operation/projects/*: Applied new styles.

	* operation/projects/project_group_detail.php: New project group
	management.

	* projects/tasks.php, projects.php: Added some columns, better
	visualization, added primitive filtering and other minor stuff.

	* operation/kb/search.php: Added search function for KB (missing).

	* images/integria.ico: new icon.

	* integria_db.sql: Some tables updated (tcost, ttask, tproject, 
	tworkunit) and new tables: tproject_group, ttask_inventory, 
	and tworkunit_inventory.

	* config_process.php: All includes now hang here.

	* functions*: Deleted includes from each file, all hooks are from
	config_process now, this solves problems with redeclaration.

	* side_menu: Addedd new group manager for projects.

	Others: Style changes for the new CSS

2008-09-22  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria.js: Result messages are now in a class instead
	of a div, so there could be more than one result div in the page.

	* include/js/integria_incident_search.js: Fixed showing resolution
	textfield when the status was set to close. Fixed errors when adding
	or removing an inventory in a incident. A message is now shown when an
	incident is created. Create incident dialog is a bit bigger now.

	* include/functions_db.php: Added get_incidents_on_inventory().

	* operation/contracts/contract_detail.php: Show only slas in JSON
	format where it's in AJAX mode. Style correction.

	* operation/incidents/incident.php,
	operation/inventories/inventory_detail.php: Added a result div
	element.

	* operation/incidents/incident_detail.php: Added a result div element.
	Changed form button container from a table to a div. Removed a line
	that was causing failures on inventory editing.
	
	* operation/inventories/inventory.php: Fixed tab numbers. Added a tab
	to show incidents of an inventory object.

	* operation/inventories/inventory_incidents.php: Added to repository.
	First version to show incidents affecting an inventory object.

2008-09-22  Esteban Sanchez  <estebans@artica.es>

	* include/functions_db.php: Added get_slas(). Renamed
	get_contract_slas() to get_contract_sla(), since there's a SLA by
	default in the contract.

	* operation/contracts/contract_detail.php: Applied changes in
	functions_db.php.

	* operation/inventories/inventory_detail.php: Add all SLAs in the
	combo, so a SLA can be changed, ignoring the default SLA of the
	contract.

	* include/js/integria_incident_search.js: Change the behaviour of the
	event of changing the contract, so the default SLA of the contract is
	now selected.

2008-09-22  Esteban Sanchez  <estebans@artica.es>

	* include/functions_form.php: Something went wrong in previous commit
	and the function name was removed.

	* operation/incidents/incident_detail.php,
	operation/inventories/inventory_detail.php: Removed debug output.

2008-09-22  Esteban Sanchez  <estebans@artica.es>

	* integria/integria_db.sql: Removed id_incident_linked field to
	id_parent and added foreign key in tincidencia. Moved tsla over
	tcontract, since it has a reference to tsla. Confirmed field is a
	tinyint(1) now.

	* include/js/integria.js: Added result_msg_error() and
	result_msg_success() to show result messages.

	* include/js/integria_incident_search.js: Added more compatibility to
	nested dialogs (each search form is now showed in its own dialog.
	Added code to dependent fields in incident and inventory forms.

	* include/styles/integria.css: Fixes in CSS selectors. Added style
	fixes also.

	* include/functions.php: Replaced lang_string() with __(). Please: Use
	__() from now on. Function list_files() taken from Pandora code. Style
	corrections.

	* include/functions_db.php: Replaced many query functions code with
	get_db_* equivalents. Added print_product_icon(), get_manufacturers()
	and get_contract_slas(). Style corrections.

	* include/functions_form.php: Replaced lang_string() with __().
	Removed unused code in combo_task_user(). Rewritten
	combo_task_user_participant() to use generic functions. Added class to
	search button in form_search_incident().

	* include/functions_html.php: Fixed an error with label support in
	print_input_text_extended(). Added label support to
	print_input_hidden(), print_checkbox() and print_radio_button(). Fixed
	XHTML code to print_submit_button() and print_button().

	* operation/companies/company_detail.php: Style correction. Replaced
	lang_string() with __().

	* operation/contracts/contract_detail.php: Added get_slas
	functionallity to AJAX support. Style correction. Replaced
	lang_string() with __().

	* operation/incidents/incident_detail.php: Replaced lang_string().
	Renamed some functions to english. The dialog for editing was
	rewritten.

	* operation/inventories/inventory.php: Second tab url set to the right
	one.

	* operation/inventories/inventory_detail.php: Allow edition of sla,
	confirmed flag and manufacturer. Fixed dialog layout. Use javascript
	already existed function.

	* operation/kb/manage_prod.php: Style correction. Add support to
	preview the product icon.

	* operation/users/user_edit.php: PHP tags must be lowercase. Added
	code to preview user avatar.

	* images/products/*: Added product images from Tango.

2008-09-19  Sancho Lerena <slerena@gmail.com>

	* integria.css: Several updates on styles.

	* integria_db.sql: Some changes in sql. SLA tables merged in only
	one table, added some fields in tgrupo and other minor changes.

	* functions.php: added get_incident_resolution().

	* functions_calendar.php: Style changes.

	* side_menu.php: new options and style changes.

	* project.php: Updated for new style.

	* user.php: updated for new style.

	* user_edit.php: Added new field (lang) for user, updated style.

	* index.php: Now load user language if defined, if not system default.

	* inventory/manufacturer_detail.php: new page for manufacturer mgmt.
	
	* inventory/building_detail.php: New page for building mgmt.

	* inventory/sla_detail.php: new page for SLA mgmt.

	* incidents/type_detail.php: New page for incident type mgmt.

	Rest of files are mostly stetic / style changes.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* operation/incidents/incident.php: Fixed title when showing search
	inventory dialog.

	* operation/inventories/inventory_detail.php: Replaced dropdown menu
	to select parent with a button to show a dialog to look inventories.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* operation/inventories/inventory_detail.php: Fixed insertion
	warnings and typo.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* include/functions_form.php: Incident search form is a bit more
	little now and it has three columns.

	* include/js/integria_incident_search.js: Changed width and height
	values of incident search dialog.

	* operation/inventories/inventory_search.php: Added a lot search
	parameters (serial number, building, contracts...). Changed navigation
	icons.

	* operation/users/user_search.php: Changed form layout, use labels.
	Changed navigation icons.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* integria/integria_db.sql: Table tproduct already existed before, and
	it was tkb_product. Foreign key in tinventory changed to it.

	* include/functions_db.php: Added get_inventories(), get_contract(),
	get_buildings() and get_contracts(). Replaced references to tproduct
	with tkb_product.

	* include/js/integria_incident_search.js: Added
	configure_inventory_form().

	* operation/incidents/incident_detail.php: Removed incident title
	reference on audit_db() call.

	* operation/inventories/inventory.php: Configure the incident form if
	first tab is loaded.

	* inventories/inventory_detail.php: Added functionality for create and
	edit.

	* inventories/inventory_search.php: Show search button in other
	preffered place.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* operation/inventories/inventory_search.php: Fixed possible warning
	if there are no inventory objects.

2008-09-17  Esteban Sanchez  <estebans@artica.es>

	* include/js/integria.js: Changes in get_form_input_values() so it can
	get a HTML object or a HTML element id.

	* include/js/integria_incident_search.js: Improved support and fixed
	bugs when nested dialogs are used. Now you can open "Create incident"
	dialog and use incident or search dialogs. Added
	show_add_incident_dialog(), configure_workunit_form(),
	show_add_file_dialog() and show_add_workunit_dialog(). Open add
	workunit and add file dialogs when clicking on the side menu option.

	* include/styles/integria.css: Added hover effects to listing tables.
	Added header style to tables. Fixed dialog title background color and
	added style to the text. Added style to label elements and to input
	text.

	* include/functions.php: Added byte_convert() function to show bytes
	magnitude. Style correction.
	
	* include/functions_db.php: Rewritten some query functions to use
	generic databse functions. Style correction. Order by in
	get_db_all_rows_field_filter() allow now a string with the order
	direction (asc or desc). Added get_inventory_affected_companies(),
	get_companies(), get_products(), get_incident_workunits() and
	get_workunit_data().

	* include/functions_form.php: Added support to filter by company
	and/or product to form_search_incident(). Added labels to the form so
	the search style is now smoother.

	* include/functions_html.php: Added print_label() to add a label to an
	input. Added optional $label parameter to print_select(),
	print_select_from_sql(), print_input_text_extended(),
	print_input_password(), print_input_text(), print_submit_button(),
	print_button(), print_textarea().

	* operation/incidents/incident.php: Added new tabs (Workunits and
	files). Changed navigation icons to control_* images. Create incident
	action is now shown in a new dialog.

	* incidents/incident_attach_file.php,
	incidents/incident_create_work.php: Avoid one indentation level by
	returning on time. Use generic functions and added AJAX support.

	* incidents/incident_detail.php: Style correction. Renamed variable
	$id_inc with $id. Added AJAX support to add workunit and add file
	operations. Use generic functions. Fixed error that was causing to
	show only one option in combos although the user has write
	permissions. Show the result area always (hidden in some cases so it
	can be shown). Changes in javascript functions reflected.

	* incidents/incident_files.php: Added AJAX support. Use lang_string()
	instead of $lang_label. Show file size with the unit instead of using
	bytes.

	* operation/incidents/incident_inventory_contacts.php: Added to
	repository. Show the contacts relative to the inventory objects
	affected by the incident.

	* operation/incidents/incident_inventory_detail.php: Added to
	repository. Show the details of the inventory objects affected by an
	incident.

	* operation/incidents/incident_search.php: Added support to filter by
	company and products.

	* operation/incidents/incident_tracking.php: Style correction. Use
	lang_string() instead of $lang_label. Fixed table width and class.

	* operation/incidents/incident_workunits.php: Style correction. Use
	databse and generic functions. Use lang_string().

	* operation/inventories/inventory.php: Added to repository. Interface
	to inventory operations.

	* operation/inventories/inventory_detail.php: Added to repository.
	Inventory editor (skeleton).

	* operation/inventories/inventory_search.php: Added to repository.
	Search into inventory objects.

	* operation/main_menu.php: Directory "inventory" is "inventories" now.

	* operation/side_menu.php: <?PHP must be lowercase. Style corrections
	and replaced ugly comments. Replaced "inventory" directory with
	"inventories".

2008-09-17  Sancho Lerena <slerena@gmail.com>

	* integria_db.sql: tcontract some field modifications.

	* login_page.php: Some style modificacions.

	* logon_failed.php: Some style modificacions.

	* config_process.php: notification_process is now processed using 
	tconfig table and also other variables.

	* integria.css: More style work. Adjusted to be full-width. Only
	firefox, IE needs a fix or something to get working fine :(

	* side_menu.php: Added builings and reordering inventory blocks.

	* company_detail.php: Added some fields to table.

	* company_role.php: Finished.

	* contact_detail.php: Code cleanup.

	* contract_detail.php: Finished.
 
2008-09-16  Sancho Lerena <slerena@gmail.com>

	* index.php: Added static flora.all.css CSS reference instead http.

	* integria_db.sql: Minimal changes in tcompany_contact.

	* functions.php: Updated render of priority, function 
	print_priority_flag_image().

	* functions_form.php: Style changes in form_search_incident().

	* integria.css: A lot of changes in styles, new appearance.

	* main_menu.php: Fixed typo in Inventory

	* side_menu.php: Added companies and contracts sub options.

	* contact_detail.php: Rewritten using our HTML functions.

	* incident.php: Added more fields on freetext search.

	* incident_detail.php: Removed some tabs (geany!).

	* incident_search.php: Removed some styles.

	* include/styles/flora: Added new CSS.

	* operation/contracts/contract_detail.php: Contracts management.

	* operation/companies/company_role.php: Company roles management.

	* operation/companies/company_detail.php: Company management.

	* images/pixel_*: New graphs.

	* images/headerbg-grey.gif, headerbg-red.gif: New header background.


2008-09-15  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: Table tincident_inventory moved to the bottom, so
	creation does not fail.

	* index.php: Added dialog javascript and div by default.

	* operation/side_menu.php: Show hidden incident menu option so it can
	be shown using Javascript. Style correction.

	* operation/users/user_search.php: Search only into users the logged
	user. Added class to pager, so it's styled now.

	* incidents/incident_search.php: Added missing search parameters.

	* incidents/incident.php: Removed redundant header. Added clasess to
	the table and the pager. Removed duplicated javascript inclusion. Some
	javascript functions moved to include/js/integria_incident_search.js.
	The right menu is now updated if an incident is clicked. Added an
	option to search incidents which affects.

	* operation/incidents/incident_detail.php: Added get_info to possible
	actions, to get information in AJAX. Style correction. Fixed a bug
	which makes impossible to change the incident owner. Insert and update
	inventory objects is now possible. Style correction.

	* include/js/integria.js: Use jQuery functions when possible. Added
	refresh_table() and get_form_input_values() which were removed in
	previous commit.

	* include/js/integria_incident_search.js: Added inventory support to
	configure_incident_form(), which also has an ajax flag support. Added
	configure_inventory_search_form() to configure the form of the search
	incident dialog. Added show_inventory_search_dialog() to show the
	incident search dialog. Added configure_incident_side_menu() to set up
	the side menu when an incident is clicked.

	* include/styles/integria.css: Added style for classes pager and
	image-button. Added style to text inputs.

	* include/functions.php: Fixed lang_string() so it works with AJAX
	dialogs.
	
	* include/functions_db.php: Added get_user_visible_users(),
	get_inventory_name(), get_inventories_in_incident(),
	get_inventory_contracts(), get_company() and get_company_contacts()
	which are self explanatory.

	* include/functions_form.php: Use print_select in
	combo_user_visible_for_me, which also uses get_user_visible_users() to
	get the users. Added inventory search support in
	form_search_incident().

	* include/functions_html.php: Changed print_select() so $multiple
	parameter now sets the size of multiple instead of a fixed value.
	Added class parameter to print_input_hidden().

2008-09-14  Sancho Lerena <slerena@gmail.com>

	* General: Cosmetic changes on project names and header (now is 
	Integria IMS, from ITIL Management System).

	* index.php: Updated links to javascript includes now on ./js dir

	* integria_db.php: Added table tcontact that was missing.

	* integria_dbdata.php: Added 'date_format' to tconfig and updated
	versions. This will be 1.2.

	* setup.php: Added context help (first use of contextual help).

	* config_process.php: Use $config["homedir"] to get correct paths.

	* functions.php: Added __ as wrapper to lang_string (need migration
	to use gettext, this is pending by now).

	* functions_html.php: Added integria_help().

	* integria.js: Moved to ./js

	* topi.js: Removed.

	* integria.css: Minimal changes, some weird happen with endlines but
	there is a few changes only.

	* main_menu.php: Added inventory.

	* side_menu.php: Added inventory submenu (minimal, probably needs 
	more subsections) and added contacts.

	* general/integria_help.php: Added new contextual help system.

	* operation/contacts/contact_detail.php: Contact management, done.

	* include/help/en/help_notification_period.php: First sample of 
	contextual help.

2008-09-10  Esteban Sanchez  <estebans@artica.es>

	* ajax.php: Added to repository. AJAX page interface.

	* index.php: Style correction, use require_once. Added jQuery
	javascript to header and a temporal stylesheet for jQuery UI elements.

	* godmode/usuarios/configurar_usuarios.php: Removed one indentation
	level. Added javascript code to preview the avatar on change.

	* include/functions.php: Added get_indicent_status () and
	print_priority_flag_image().

	* include/functions_calendar.php: Blankspace correction. Removed
	unused function getWorkingDays().

	* include/functions_db.php: Style correction on give_acl_free(). Added
	quotes to parameter in function_exists, since it's mandatory. Some
	functions were rewritten to use get_db_* functions. Adde get_groups()
	and get_user_groups().
	
	* include/functions_form.php: Use HTML functions instead of echo.
	Style correction and rewritten to a better code. Added $return flag to
	some functions, so the output is returned or printed. Blankspace
	correction. Added form_search_incident().

	* include/functions_html.php: Added id property to print_textarea.
	Added tbody and thead to print_table(). Added a better id to checkbox
	input element. Added class parameter to print_help_tip().

	* include/integria.js: Added refresh_table() and
	get_form_input_values(). Use jQuery functions in toggleDiv().

	* include/js/integria_incident_search.js, include/js/jquery.js,
	include/js/jquery.ui.core.js, include/js/jquery.ui.draggable.js,
	include/js/jquery.ui.tabs.js, include/js/jquery.tablesorter.js,
	include/js/jquery.tablesorter.pager.js,
	include/js/jquery.ui.dialog.js, include/js/jquery.ui.resizable.js,
	include/js/jquery.metadata.js: Added to repository. Javascript jQuery
	stuff and a new file with functions using that framework.

	* include/styles/integria.css: Blankspaces correction. New styles
	added.

	* integria/operation/side_menu.php: Removed incident search option
	since it's the default option now. Replaced $lang_label with
	lang_string.

	* images/go-first.png, images/go-previous.png, images/go-last.png,
	images/go-next.png: Added to repository.

	* operation/incidents/incident.php: It now uses AJAX.

	* incidents/incident_detail.php: Code uncrappy.

	* operation/incidents/incident_search.php: Use integria functions.
	It only works with AJAX.

	* operation/incidents/incident_tracking.php: Blankspace correction.
	Use lang_string.

	* operation/users/user.php: Removed an useless indentation. Use
	lang_string. Blankspace correction.

2008-09-08  Sancho Lerena <slerena@gmail.com>

	* install.php: Updated code, many fixes and some new checks. Tested.

	* error*: Updated header and strings.

	* functions*: Updated header and LGPL licence.

	* integria_db.sql: Fixed a minor problems.

2008-09-07  Sancho Lerena <slerena@gmail.com>

	* include/functions_db.php: Added support for enterprise functions.

	* index.php: Fixed autoURL login redirection to work if using login
	with other URL (from a different website, pe.)

2008-09-02  Esteban Sanchez  <estebans@artica.es>
	
	* install.php: Delete install file on step 5.

2008-09-02  Esteban Sanchez  <estebans@artica.es>

	* install.php: Set config file permissions on step 5 so it doesn't
	warn about it once installed.

2008-09-02  Esteban Sanchez  <estebans@artica.es>

	* integria_db.sql: New tables added relatives to inventory.

	* include/functions_html.php: Added to repository.

	* general/error_perms.php: Style correction.

	* include/config_process.php: Style correction. Use database
	functions. Removed useless code.

	* include/functions.php: Avoid using $lang_label. Style correction.
	Added get_indicent_priorities().

	* include/functions_db.php: Added new functions. Renamed give_db_* to
	get_db_*. Style correction.

2008-09-01  Sancho Lerena <slerena@gmail.com>

	* (Several files)  Several changes to make it render properly in IEa

	* functions_db.php,
	* functions.php: Output ascii was not using proper function
	to decode html entities. FIxed and passed siubject for the
	filter too.
	
	* integria.css: Starting to do things to render
	properly in IE.
	
	* functions_db.php: This should fix the mails with anoying 
	HTML entities.

2008-08-05  Sancho Lerena <slerena@gmail.com>

	* integria_db.sql: Added end field to task.

	* operation/projects/task_detail.php: Added end field.

	* operation/projects/gantt_graph.php: Added end field on task
	and removed previous code to recalculate using hours assigned.

	* operation/projects/task.php: Added end field.

	* include/functions.php: Added functions clean_output and remove_locale_chars.

2008-07-29  Sancho Lerena <slerena@gmail.com>
	
	* operation/kb/browse_data.php: New page to vide KB items.

	* operation/kb/manage_prod.php: Solved some minor bugs.

	* operation/kb/manage_data.php: Solved some minor bugs.

	* operation/kb/browse.php: New page to browse/search
	KB items.

	* operation/side_menu.php: Delete KB Search (nosense)

	* include/functions.php: Updated some functions (minor).

2008-07-22  Sancho Lerena <slerena@gmail.com>

	* include/functions_form.php: Fixed problem adding
	people to tasks.

2008-07-08  Sancho Lerena <slerena@gmail.com>

    * setup.php, config_process.php,
    integria_dbdata.sql: Added notification_period config token 

    * event.php: Better aliment for columns.
    
    * integria.ico. New icon.

    * functions.php: Clean input now converts all data on html
    equivalente. function ascii_output() makes the inverse operation.
    topi_sendmail uses ascii_output by default.

    * incident.php: also shows incident creation timestamp.

    * integria_cron.php: SLA enforment system. Running under a 
    cron tasks, check that all SLA conditions are right. If not
    send emails to each incident responsible and generate an event.

2008-07-01  Sancho Lerena <slerena@gmail.com>

	* operation/projects/task.php: Task order by name,

	* include/functions_db.php: Deletion of a task: assign wu to 
	parent task. If don't have one, delete it all.

2008-06-10  Sancho Lerena <slerena@gmail.com>

	* index.php: Fixed problem with login, that don't fill 
	$config["id_user"] variable at first login page.

	* user_task_assigment.php: Fixed bad ACL check

	* task_detail.php: Text area is now bigger

2008-06-08  Sancho Lerena <slerena@gmail.com>

    * agenda.php. Implemented autonotification by email with a ical attach.
    added duration of event and group.

    * integria_dbdata.sql: Added default profiles with KB access.

    * operation/users/user_spare_workunit.php: Added event tracking.

    * operation/projects/task_workunit.php: Added event tracking.

    * operation/kb: Knowledgue base section. Not finished. Need many work.

    * include/functions.php: Better layout for pagination.

    * functions_db.php: Added function to create ical, to send email 
    attachment and to insert generic events into event tracking system.

    * godmode/setup/event.php: Event tracking view (need pagination and 
    search filters)

    * integria_db.sql: Several changes: tprofile, tagenda, added tevent, and
    knowledge tables (tkb*). 

    * Updated menus.

2008-06-06 Sancho Lerena <slerena@gmail.com>

	* user_task_assigment.php: Better layout, links to task
	also show ONLY unfinished tasks and show progress.

	* task_workunit.php: Fixed problem viewing specific task
	or project WU in list mode.

	* include/functions_graph.php,
	* user_report/monthly_graph.php: Graph was not working fine
	now shows only current - 30 days (one month) and do not show
	data from the future.

	* include/functions_calendar.php: Fixed problem calculating
	weeks (Julia detected this bug some time ago).

2009-06-03 Sancho Lerena <slerena@gmail.com>

	* Fixed problems editing vacations workunits. Added
	link in montly workunit report to add spare workunit with
	date from calendar. Fixed several problems in autologin
	and splitted toolbox in side menu to a different file.
	Available tasks for a given user don't show tasks from
	disabled projects.

2008-05-28 Sancho Lerena  <slerena@gmail.com>

	* A lot of fixes in incident, used user/email assigment
	for each group defined. Better management of WU in incidents
	and solved several bugs with delete, update and visualization
	of projects and incidents. Better managment of multi-day
	spare workunit, added two checkboxes to split WU and do 
	an optional fordward propagation.

2008-05-26 Sancho Lerena  <slerena@gmail.com>

	* functions_calendar.php: Added calendar for year view
	and functions to return work days backwards.

	* FreeSans.ttf: Moved from reporting (now deleted) to
	include.
	
	* attachment/tmp: Added to repo.

	* /user_spare_workunit.php: Now can enter units > 8hr
	and make automatically a split from back in time, using
	8 hr (or user defined)for each day. Very useful to enter
	vacations.

	* report_annual.php: Added year view, show in colors
	worked days and vacation days. Also show a summary.

	* Minor fixes in other files.

2008-05-25 Sancho Lerena  <slerena@gmail.com>

    * project_detail.php: Added more information (statistica, financial)
    to project detailed view. Some of that information could be used
    in the future for specific automated PDF reports.

    * report_monthly.php: Added charged work hours per user / month.

    * functions_graph.php: Added two funtions (graphviz dep) to
    show a project tree and user tasks in a fancy tree :-)

    * projects/project_detail.php: Added a project tree graph under 
    the data controls.

    * projects/project_tree.php: Added a new option: Project tree
    graph, using graphviz, and using a imagemap to navigate. Has
    a menu to select different options/views.

    * users/user_task_assigment.php: Shows all tasks assigned to 
    current user, with WU data and last entered wu.

    * main_menu.php, side_menu.php: Updated options.

    * setup/incident.php: Added options to future implementations 
    of SLA in reporting.

    * integria_db.sql: New tables (incident SLA and notification 
    (via cron job) management.

    * usuarios/role_user_global.php: Allows to do a global, per user
    management of assigned taks to each user. Easy and fast to keep
    updated a realistic project planification.

    * install.php: Added graphviz to dependency checks.

    * attachment/tmp: Added to be used with graphviz

    * include/integria_cron.php: Added to future crontab periodic 
    task management.

    * functions_db.php: user_belong_task() fixed small bug. 
    user_belong_project() added switch to be used ignoring admin
    mode. Added give_wu_task_user()

2008-04-29 Sancho Lerena <slerena@gmail.com>

	* operation/projects/task_workunit.php: Fixed problem deleting
	workunits from vacations.

2008-04-18 Sancho Lerena <slerena@gmail.com>

	* /incident_detail.php, 
	/project_detail.php: Small bug fixed in project manager
	view (assigment works but not correctly visualized).

2008-04-17 Sancho Lerena <slerena@gmail.com>

	* include/functions_calendar.php: Added a few functions to
	manage weeks.

	* README: Added a brief documentation :-)

	* operation/side_menu.php: Fixed calculation of workunits/week

2008-04-14 Sancho Lerena <slerena@gmail.com>

	* functions_db: Missing id_project field on call to make URL

	* home.php: Missing datetimecheck in agenda block.

	* functions_db: Bad datatime field used to include WU date

2008-04-12 Sancho Lerena <slerena@gmail.com>

	* task.php: Removed debug start date in task info

	* gantt*: Sime final fixes on milestones for gant..

2008-04-12 Sancho Lerena <slerena@gmail.com>

	* main.php: Show blocks only if have data.

	* sidemenu.php: Fixed .png missing extension.
	
	* Final fixes for next 1.0 version. Installer fully works.

	* A lot of fixes and improvementes. Implemented email links
	using auth and redirectiong to passed URL. Removed quicklink
	Also a lot of fixes on email management. Added user menu
	quick links, and fixed gant. Created methods to deduce
	start / end date on nested tasks.
	
2008-04-10 Sancho Lerena <slerena@gmail.com>
	
	* Some addional fixes for problems with direct link sended
	to different users and minor fixes.

	* config_process: Separated DB operations from simple config.

	* Massive commit. Many many changes and fixes from yesterday

2008-04-09 Sancho Lerena <slerena@gmail.com>

	* Massive commit. Many changes and fixes from last version.

2008-01-14 Sancho Lerena <slerena@gmail.com>

	* Renamed and added images for project name change from
	topi to integria. Also fixed installer and other issues.

2007-12-03 Sancho Lerena <slerena@gmail.com>

	* Fixed bug in quickaccess. Randomstring is now shorter.

	* Fixed bug in todo creation with taskid = ""

2007-12-02 Sancho lerena <slerena@gmail.com>

	* topidb.sql: Added tquicksession, and added id_task field
	to ttodo table.

	* operation/incidents/incident.php: Incidents send a link in 
	emails for quick login on topi.

	* operation/todo/todo.php: On todo it's possible associate a 
	todo with a task, and add workunits from a todo. Also it's 
	added a link on email notifies to quick login on topi.

	* operation/user_report/monthly.php: Fixed bad message string

	* include/functions_graph.php: Added the first graph: Statis
	tical info about incidents.

	* include/functions_form.php, include/functions_db.php: Some
	improvements on small functions.

	* include/functions.php: Quick login function and others.


	* index.php: Implemeted quick login links

	* include/Image: Added here Image:Graph library. Moved from 
	reporting/ directectory.

2007-11-29 Sancho Lerena <slerena@gmail.com>

	* Added support to notify by mail (only incidentes at this tiem)

	* Fixed problem with incident creation. now it's possible to 
	anyone to assign incident to other people authorized.

2007-11-28 Sancho Lerena <slerena@gmail.com>

	* operation/incidents/incident.php, incident_detail.php,
	 incident_create_work.php: Fixed some issues with incidents.

	* operation/projects/task_workunit.php, project.php: Fixed
	ACL issues with workunits.

	* include/functions_form.php, functions_db.php, functions.php:
	Code cleanup and other.

2007-11-19 Sancho Lerena <slerena@gmail.com>

	* user_spare_workunit.php: Fixed problems in spare wu.

	* task_workunit.php, task_create_work.php: Several fixes.

	* calendar.php, sidemenu.php, monthly.php: Now can navigate to 
	next/prev month and it's linked from side menu as default 
	reporting option. Fixed calculation for first day of week.

	* include/functions_form.php: List of tasks includes project name.

2007-11-16 Sancho Lerena <slerena@gmail.com>

	* topidb.sql: Added disabled field to projects. No real delete,
	this is used to mark for "non visible". Real delete should imply
	delete associated tasks and workunits, I think should not been
	implemented

	* user_workunit_report.php: Implemented full content view for
	single workunits marked to see full lenght.

	* projects.php: Now it's possible to mark for disabled projects.
	Projects disabled are not seen in that view.

	* monthly.php: New detailed view for workunits mapped over
	a month graph. Multiuser, multidates, with some ACL check.

	* report_*: Fixed to work with ACL and multi dates.

	* side_menu.php: Updated to work new reporting options for all.

	* language_en.php: Updated strings.

	* avatars/*: Some new added :)

	* task.php: Fixed bug (forget to commit) to view nested tasks

2007-09-03  Sancho Lerena  <slerena@artica.es>

	As usual too many changes to describe it :-)

	* Added gantt graphic.

	* Added support to milestones.

	* Fixed A LOT of bugs
	
	* Workunits are now editable and erasable

	* Many improvements...

	* Added avatar images of Artica team.

2007-08-16  Sancho Lerena  <slerena@artica.es>

	* Several fixes in project ACL. Added weekly report. Added useful
	datetime functions and a lot of small fixes and improvements.

	* todo.php: Fixed problem with email.

	* function, function_db: Removed sendmail function and placed in function.
	
	* topidb.sql: Aditional fixes for id_task signed var.

	* include/config.php.inc: Added

	* include/config.php: Deleted from trunk,

	* godmode/usuarios/configurar_usuarios.php: Fixed stupid bug creating users.

	* topidb.sql: ttask now admits negative values for special
	tasks. This change also affects to tworkunit_task. Several
	structural changes to ttodo table.

	* images/avatars: Added some custom icons for avatar.
	
	* operation/users: Improvements for user management, view and
	basic user workunit report.

	* operation/todo/todo.php: Todo management (all in this file).
	
	* operation/projects: Several changes in structure and new files
	to split tasks before in the same files.
	
	* operation/user_report: Base for reporting.
	
	* operation/user_report/report_monthly.php: Basic report tool
	(montly).
	
	* operation/main_menu.php: Added todo.
	
	* operation/side_menu.php: Added todo, users and several options
	for project/task management.
	
	* topidb_data.sql: Added new values for ttask (vacation, disease
	and not justified as -1, -2 and -3 id)
	

2007-07-30  Sancho Lerena <slerena@artica.es>

	* Massive update. Cannot describe with detail, intensive work.

2007-06-29  Sancho Lerena  <slerena@artica.es>

	* operation/users/user.php: Fixed userlist.

	* operation/users/user_spare_workunit.php: Tool to add spare
	workunits from user menu. Also the key to add "vacation" entries
	and in the future, entries for "orphaned" tasks (no task at all).

	* operation/users/user_workunit_report.php: Very primitive tool to
	report workunits. Need to be improved a lot.

	* operation/projects/task_detail.php: Now uses profiles and cost
	data in workunit assignment tool.

	* operation/projects/task_workunit.php: Much better render for
	workuings (project or task), and workunit deletion. Some tabs
	improvement.

	* operation/projects/task_files.php: Add tab for task detail.

	* operation/side_menu.php: Added workunit spare assigment and
	workunit report under user menu.

	* include/functions_form.php: Added functions
	combo_user_task_profile(), combo_task_user_participant() and fixed
	some old functions.

	* include/functions.php: clean_input() better implementation.
	
2007-06-28 Sancho Lerena  <slerena@artica.es>

	* Mixed import from unversioned development. Many fixes:

	* topidb.sql: Added trole_people_project.
	
	* operation/incidents/incident.php,
	operation/incidents/incident_detail.php,
	operation/incidents/incident_search.php, operation/users/user.php,
	operation/projects/people_manager.php,
	operation/projects/task.php, operation/projects/task_detail.php,
	operation/projects/project.php,
	operation/projects/project_detail.php, operation/side_menu.php,
	include/functions_graph.php.
	
	* include/functions_form.php
	* include/styles/topi.css
	* include/functions_db.php
	* include/functions.php
	* topidb_data.sql
	* godmode/usuarios/configurar_usuarios.php
	* godmode/usuarios/role_manager.php
	* godmode/usuarios/lista_usuarios.php

2007-05-14 Sancho Lerena <slerena@artica.es>

	* Several updates for project rename.

2007-05-08 Sancho Lerena <slerena@artica.es>

	* operation/incidents/incident_detail.php: Added workunit details
	(havecost and profile).
	
	* operation/projects/task_detail.php: Fixed some bugs, now boxes
	are collapsable.
	
	* operation/projects/project.php: Fixed minor bugs.
	
	* operation/projects/project_detail.php: Fixed minor bugs.
	
	* include/functions_db.php: Fixed minor bugs.
	
	* include/languages/language_en.php: More strings.
	
	* fritsdb.sql: Added have_cost and id_profile to tworkunit.

2007-05-07  Sancho Lerena  <slerena@artica.es>

	* general/logoff.php: Fixed some erros. Better layout.
	
	* index.php: Fixed some warnings.

2007-05-07 Sancho Lerena  <slerena@artica.es>

	* operation/agenda.php: Added new main feature: agenda. At this
	time is very basic and without ACL, but works fine.

	* incident.php: Fixes many function name changes and more.
	
	* incident_work.php: Added workunit view for incident.
	
	* incident_notes.php: Now is possible to create a workunit
	automatically from a note insertion.

	* incident_detail.php: Some changes in edition.
	
	* operation/users/*:  Fixes many function name changes and more.
	
	* operation/messages: Fixes many functions names.
	
	* include/calendar.php: Code changed from original.
	
	* fritsdb.sql: Added table for tagenda

	* general/logon_failed.php: Better layout and general stetic.


2007-05-03 Sancho Lerena  <slerena@artica.es>

	* Added files: operation/projects/task_files.php
	operation/projects/task_detail.php
	operation/projects/task_workunit.php include/functions_graph.php

	* Massive changes in $config and global variables. Some main
	functions changed to english, some estructural (and temporal)
	changes.

	* Now is functional the basic project / task management with
	workunit assigment, many bugs, many features not implemented
	(human resource allocation).

	* Old code from messages, user and incident management is
	temporaly brokwn because function renames.

	* BEWARE: There is no ACL checks yet!.
	
	* include/functions_graph.php now contains all graphical functions.

2007-04-26  Sancho Lerena <slerena@artica.es>

	* operation/projects/task.php: Task manager (Added).

	* operation/projects/project.php: Proyect main view (updated).

	* operation/projects/project_detail.php: Project editor, tabs
	added.

	* operation/main_menu.php: Removed assets.

	* include/functions_form.php: Added functions for forms.
	
	* include/styles/frits.css: Added tabs.

	* include/calendar.js: Added calendar javascript code for calendar
	controls.
	
	* include/languages/language_en.php: More strings.

	* fritsdb.sql: Several updates on structural scheme. Added id_task
	FKEY to tincidencia. Added tables for task, project, and some
	other important tables.
	
	* index.php: Added calendar code to be available in all pages.

2007-04-16  slerena  <slerena@artica.es>

	* Added many graphic files.

	* Now adapting new style from old code coming from Pandora FMS
	project.

	* All PHP changes are related for style, no new features added.

	* Menu is now divided on sidemenu.php and main_menu.php (at the
	top), god mode menu not used anymore (will be a special top menu).

